import{a as e,r as n,x as M,aJ as H,ar as A,as as w,at as K,M as x,av as G,au as J,aw as V,ax as I,ay as D,an as C,az as z,z as W,B as q,am as X,F as Y,aK as Z,E as ee,G as ae,H as se,a6 as te,a7 as le,a8 as B,aL as ne,a9 as oe,aa as ie,aA as ce,aI as re,aM as de,aN as me,aO as pe,aP as ue,N as he,aQ as g,aR as ye,aS as ge,R as xe,aT as Se,aB as fe,t as je,aU as ve,aV as Ce,aD as be,aW as Ee}from"./index-7aa002ab.js";import{C as Ne}from"./circle-dollar-sign-c3c40779.js";import{u as _e,e as Fe}from"./attendance-policy-mapping-2bdfcba5.js";import{u as Pe}from"./index-04b61c40.js";import{u as Ae}from"./index-0129852a.js";import{u as we}from"./index-a29357d0.js";import{u as Ke}from"./index-3705fc9d.js";const Ge=()=>e.jsx("div",{});function De({data:a}){console.log(a),console.log(a.id);const[o,i]=n.useState(!1),[c,r]=n.useState(!1),m=M(),[t,{isLoading:p}]=H(),s=async l=>{try{await t(l),C.success("Job Candidate deleted successfully"),i(!1)}catch(u){console.log(u)}};return e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(A,{children:e.jsxs(w,{children:[e.jsx(K,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>m(`/hrm/salary-setup/${a.id}`),className:"hover:bg-secondary",children:e.jsx(Ne,{className:"h-4 w-4 text-foreground"})})}),e.jsx(G,{children:e.jsx("p",{children:"Update Employee Salary Setup"})})]})}),e.jsx(A,{children:e.jsxs(w,{children:[e.jsx(K,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>m(`/hrm/employees-list/edit/${a.id}`),children:e.jsx(J,{className:"h-4 w-4 text-foreground"})})}),e.jsx(G,{children:e.jsx("p",{children:"Update Employee"})})]})}),e.jsx(A,{children:e.jsxs(w,{children:[e.jsx(K,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>{i(!0)},children:e.jsx(V,{className:"h-4 w-4 text-foreground"})})}),e.jsx(G,{children:e.jsx("p",{children:"Delete employee"})})]})}),e.jsx(I,{title:"Are you sure?",description:"This action cannot be undone.",name:a.first_name,isOpen:o,onClose:()=>i(!1),onConfirm:()=>s(a.id),loading:p}),c&&e.jsx(D,{title:"Job Details",isOpen:c,toggleModal:()=>r(!1),className:"w-[90%] max-w-6xl",children:e.jsx(Ge,{})})]})}const Me=[{id:"select",header:({table:a})=>e.jsx(z,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:o=>a.toggleAllPageRowsSelected(!!o),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:a})=>e.jsx(z,{checked:a.getIsSelected(),onCheckedChange:o=>a.toggleSelected(!!o),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"first_name",header:"First name"},{accessorKey:"last_name",header:"Last name"},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{accessorKey:"",accessorFn:({department:a})=>a==null?void 0:a.name,header:"Department"},{accessorKey:"location",accessorFn:({location:a})=>a==null?void 0:a.name,header:"Location"},{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"Actions"}),enableSorting:!1,cell:({row:a})=>e.jsx(De,{data:a.original})}];function ke({payload:a,modelClose:o}){const[i,c]=n.useState(!1),[r,{isLoading:m}]=_e(),[t,p]=n.useState(null),s=M(),{data:l,isLoading:u}=Pe("per_page=1000&page=1"),f=(l==null?void 0:l.data)||[],d=W({resolver:q(Fe),defaultValues:{employee_ids:a==null?void 0:a.map(h=>h.id),effective_date:new Date().toISOString().split("T")[0]}}),j=h=>{h&&(p(h),d.setValue("effective_date",`${B(h,"yyyy-MM-dd")}`),c(!1))};async function S(h){const b={...h,employee_ids:(a==null?void 0:a.map(v=>v.id))||[]};try{await r(b),C.success("Employee Attendance Policy created successfully"),o&&o(),s("/hrm/attendance-policy-mapping")}catch(v){console.log(v)}}return e.jsx(e.Fragment,{children:m?e.jsx("div",{className:"h-[535px]",children:e.jsx(X,{})}):e.jsx("div",{className:"flex gap-x-4",children:e.jsx("div",{className:" w-full ",children:e.jsx(Y,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(S),className:"",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx("div",{className:"w-full",children:e.jsx(Z,{loading:u,data:f,displayField:"name",valueField:"id",form:d,name:"attendance_policy_id",title:"Attendance Policy",className:"w-[460px]"})}),e.jsx(ee,{control:d.control,name:"effective_date",render:()=>e.jsxs(ae,{children:[e.jsx(se,{children:"Effective Date"}),e.jsxs(te,{open:i,onOpenChange:c,children:[e.jsx(le,{asChild:!0,className:"",children:e.jsxs(x,{variant:"outline",className:`w-full justify-start text-left font-normal ${!t&&"text-muted-foreground"}`,children:[t?B(t,"PP"):"Pick a date",e.jsx(ne,{className:"ml-auto h-4 w-4 opacity-50"})]})}),e.jsx(oe,{className:"w-auto p-0",align:"start",children:e.jsx(ie,{mode:"single",selected:t??void 0,onSelect:j,initialFocus:!0})})]})]})})]}),e.jsx("div",{children:e.jsx(x,{variant:"default",type:"submit",className:"w-full mt-4",children:"Save"})})]})})})})})}function Le({setFilterParams:a}){const{data:o}=ce("per_page=1000"),{data:i}=re("per_page=1000"),{data:c}=de("per_page=1000"),{data:r}=me("per_page=1000"),{data:m}=pe(),{data:t}=ue("per_page=1000"),{data:p}=Ae(),{data:s}=we("per_page=1000"),{data:l}=Ke("per_page=1000"),[u,f]=n.useState(void 0),[d,j]=n.useState(void 0),[S,h]=n.useState(void 0),[b,v]=n.useState(void 0),[E,k]=n.useState(void 0),[N,L]=n.useState(void 0),[_,R]=n.useState(void 0),[F,O]=n.useState(void 0),[P,T]=n.useState(void 0),$=()=>{const y=new URLSearchParams;u&&y.append("department_id",u.id.toString()),d&&y.append("designation_id",d.id.toString()),S&&y.append("location_id",S.id.toString()),b&&y.append("section_id",b.id.toString()),E&&y.append("employment_status_id",E.id.toString()),N&&y.append("schedule_id",N.id.toString()),_&&y.append("gender_id",_.id.toString()),F&&y.append("employee_class_id",F.id.toString()),P&&y.append("employee_grade_id",P.id.toString());const Q=y.toString();console.log(Q),a(Q),C.success("Filters applied successfully")},U=()=>{f(void 0),j(void 0),h(void 0),v(void 0),k(void 0),L(void 0),R(void 0),O(void 0),T(void 0),a(""),C.success("Filters reset successfully")};return e.jsxs(he,{className:"w-full p-5",children:[e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx(g,{items:(o==null?void 0:o.data)||[],labelKey:"name",valueKey:"id",value:u,placeholder:"Select Department",onSelect:f}),e.jsx(g,{items:(i==null?void 0:i.data)||[],labelKey:"name",valueKey:"id",value:d,placeholder:"Select Designation",onSelect:j}),e.jsx(g,{items:(r==null?void 0:r.data)||[],labelKey:"name",valueKey:"id",value:S,placeholder:"Select Branch",onSelect:h}),e.jsx(g,{items:(c==null?void 0:c.data)||[],labelKey:"name",valueKey:"id",value:b,placeholder:"Select Section",onSelect:v}),e.jsx(g,{items:(m==null?void 0:m.data)||[],labelKey:"name",valueKey:"id",value:E,placeholder:"Select Status",onSelect:k}),e.jsx(g,{items:(t==null?void 0:t.data)||[],labelKey:"name",valueKey:"id",value:N,placeholder:"Select Shift",onSelect:L}),e.jsx(g,{items:(p==null?void 0:p.data)||[],labelKey:"name",valueKey:"id",value:_,placeholder:"Select Gender",onSelect:R}),e.jsx(g,{items:(s==null?void 0:s.data)||[],labelKey:"name",valueKey:"id",value:F,placeholder:"Select Class",onSelect:O}),e.jsx(g,{items:(l==null?void 0:l.data)||[],labelKey:"name",valueKey:"id",value:P,placeholder:"Select Grade",onSelect:T})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-4",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:U,children:"Reset Filters"}),e.jsxs(x,{variant:"default",size:"sm",onClick:$,children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"Apply Filters"]})]})]})}const Re=[{label:"Enable Roster",value:"enable-roster"},{label:"Attendance Policy Mapping",value:"attendance-policy-mapping"},{label:"Delete Selected",value:"delete-selected"},{label:"Salary Estimate/Generate",value:"salary-estimate-generate"}],Ue=()=>{const a=M(),o=ge(),[i,c]=n.useState(""),[r,m]=xe.useState({pageIndex:0,pageSize:10}),{data:t,isLoading:p}=Se(`per_page=${r.pageSize}&page=${r.pageIndex+1}${i}{}`),[s,l]=n.useState({action:"",payload:[]}),u=(t==null?void 0:t.data)||[],f=t==null?void 0:t.meta,d=()=>{console.log("Handle Employee Roster Change"),console.log(s),C.success("Employee roster updated successfully"),l({action:"",payload:[]})},j=()=>{console.log(s),o(Ee(s)),C.success("Employee selected successfully"),l({action:"",payload:[]}),a("/hrm/estimate-salary")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(fe,{title:"Employees",description:"Manage employees for you business"}),e.jsxs(x,{onClick:()=>a("/hrm/employees-list/add"),size:"sm",children:[e.jsx(je,{className:"mr-2 h-4 w-4"})," Add Employee"]})]}),e.jsx(ve,{}),e.jsx(Le,{setFilterParams:c}),p&&e.jsx(Ce,{}),u&&!p&&e.jsx("div",{children:e.jsx(be,{columns:Me,data:u,bulkActions:Re,onBulkSelectChange:l,paginationInfo:f,pagination:r,setPagination:m})})]})}),s.action==="enable-roster"&&e.jsx(I,{title:"Enable Employee Roster?",description:"This action can be changed later",alertMessage:"Are you sure you want to update employee roster status?",type:"default",isOpen:s.action==="enable-roster",onClose:()=>l({action:"",payload:[]}),onConfirm:d}),s.action==="attendance-policy-mapping"&&e.jsx(D,{title:"Attendance Policy Mapping",toggleModal:()=>l({action:"",payload:[]}),isOpen:s.action==="attendance-policy-mapping",className:"!h-fit",children:e.jsx(ke,{payload:s.payload,modelClose:()=>l({action:"",payload:[]})})}),s.action==="salary-estimate-generate"&&e.jsxs(D,{title:"Salary Estimate/Generate",toggleModal:()=>l({action:"",payload:[]}),isOpen:s.action==="salary-estimate-generate",className:"!h-fit",children:[e.jsxs("span",{children:[s.payload.map(S=>S.first_name).join(", ")," "]}),e.jsx(x,{onClick:j,children:"Select the Employees"})]})]})};export{Ue as default};
