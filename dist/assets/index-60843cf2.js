import{r as u,dW as f,B as j,a as e,aB as d,aC as p,aD as x,X as o,aE as P,aF as g,aG as y,aH as S,ax as C,ay as v,aJ as h,dw as N,dX as b,aw as w,aL as T,aM as k,aN as A,aO as I}from"./index-fe9eec72.js";function M({data:s}){const[a,n]=u.useState(!1),[i,{isLoading:t}]=f(),c=j(),l=async m=>{try{await i(m).unwrap(),C.success("Pipeline deleted successfully"),n(!1)}catch(r){console.log(r),v(r)}};return e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(d,{children:e.jsxs(p,{children:[e.jsx(x,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>c(`/crm/lead/pipelines/edit/${s.id}`),children:e.jsx(P,{className:"h-4 w-4 text-foreground"})})}),e.jsx(g,{children:e.jsx("p",{children:"Update Pipeline"})})]})}),e.jsx(d,{children:e.jsxs(p,{children:[e.jsx(x,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>{n(!0)},children:e.jsx(y,{className:"h-4 w-4 text-foreground"})})}),e.jsx(g,{children:e.jsx("p",{children:"Delete Pipeline"})})]})}),a&&e.jsx(S,{title:"Are you sure?",description:"This action cannot be undone.",name:"This Pipeline",isOpen:a,onClose:()=>n(!1),onConfirm:()=>l(s.id),loading:t})]})}const z=[{id:"select",header:({table:s})=>e.jsx(h,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>s.toggleAllPageRowsSelected(!!a),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:s})=>e.jsx(h,{checked:s.getIsSelected(),onCheckedChange:a=>s.toggleSelected(!!a),"aria-label":"Select row",className:"translate-y-[2px] my-3"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:"Pipeline Name"},{accessorKey:"details_count",header:"Total Stage"},{accessorKey:"status",header:"Status",cell:({row:s})=>N(s.getValue("status"))},{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"Actions"}),enableSorting:!1,cell:({row:s})=>e.jsx(M,{data:s.original})}],R=()=>{const s=j(),[a,n]=u.useState({pageIndex:0,pageSize:10}),{data:i,isLoading:t}=b(`per_page=${a.pageSize}&page=${a.pageIndex+1}`),c=(i==null?void 0:i.data)||[],l=i==null?void 0:i.meta;return t?e.jsx(w,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{title:"Pipeline List",description:"Manage your sub accounts for you business"}),e.jsxs(o,{onClick:()=>s("/crm/lead/pipelines/add"),size:"sm",children:[e.jsx(k,{className:"mr-2 h-4 w-4"})," Add Pipeline"]})]}),e.jsx(A,{}),i&&e.jsx("div",{children:e.jsx(I,{data:c,columns:z,paginationInfo:l,pagination:l&&a,setPagination:l&&n})})]})})})};export{R as default};
