import{j as e,A as Z,r as A,R as te}from"./index-CwtkdAoF.js";import{u as je,t as he,L as b,F as me,a as r,b as o,c as x,d as t,e as j,S as N,f as C,g as P,h as w,i as g,M as p,H as ae}from"./modal-DpBJVnX2.js";import{B as E}from"./index-Cxev_hGH.js";import{$ as ge}from"./index-D-gdl2yy.js";import{P as fe,T as be,A as ye,C as le,D as Se}from"./alert-modal-BmFBKbfb.js";import{I as f}from"./input-BHxcSLDT.js";import{g as _e}from"./validators-P_ADjOZ1.js";import{u as Ne}from"./index-vbE5KBIy.js";import{c as Ce}from"./index-C8LFf9eD.js";import{c as Pe}from"./index-BXlpppSt.js";import{u as we}from"./index-BUkrtc3t.js";import{u as Le,T as k}from"./textarea-BM7V81aI.js";import{u as Ve}from"./index-NI9XXa4d.js";import{S as Me}from"./switch-JQuS2kbZ.js";import{a as Ee,b as ke,c as Ae,u as Fe}from"./index-Dya9kXXU.js";import{u as Je}from"./index-B8o9Qtp5.js";import{T as U,a as W,b as H,c as B}from"./tooltip-BMgwtow4.js";import{Z as Ie}from"./zoom-in-DKWto7GQ.js";import{P as Oe}from"./sheet-CUiZ_cAH.js";import"./dropdown-menu-DfrG1frA.js";import"./chevron-right-DEhBy0bI.js";import"./card-Ba-Nv17p.js";function ce({modalClose:s,data:n}){var Y,X,v,D,ee,ne,se;const[m,{isLoading:y}]=Ee(),[h,{isLoading:S}]=ke(),{data:a,isLoading:_}=Je(),{data:V,isLoading:F}=Ce("page=1&per_page=1000"),{data:M,isLoading:J}=Pe("page=1&per_page=1000"),{data:I,isLoading:de}=we("page=1&per_page=1000"),{data:O,isLoading:ie}=Ne("page=1&per_page=1000"),{data:T,isLoading:re}=Le(),{data:R,isLoading:oe}=Ve(),z=(V==null?void 0:V.data)||[],K=(a==null?void 0:a.data)||[],q=(M==null?void 0:M.data)||[],u=(I==null?void 0:I.data)||[],G=(O==null?void 0:O.data)||[],Q=(T==null?void 0:T.data)||[],$=(R==null?void 0:R.data)||[],d=je({resolver:he(_e),defaultValues:{title:(n==null?void 0:n.title)||"",sorting_index:(n==null?void 0:n.sorting_index)||0,date:(n==null?void 0:n.date)||"",deadline:(n==null?void 0:n.deadline)||"",vacancy_number:(n==null?void 0:n.vacancy_number)||0,organization_id:((Y=n==null?void 0:n.organization)==null?void 0:Y.id)||1,department_id:((X=n==null?void 0:n.department)==null?void 0:X.id)||1,designation_id:((v=n==null?void 0:n.designation)==null?void 0:v.id)||1,location_id:((D=n==null?void 0:n.location)==null?void 0:D.id)||1,vacancy_requisition_id:((ee=n==null?void 0:n.vacancy_requisition)==null?void 0:ee.id)||1,employment_status_id:((ne=n==null?void 0:n.employment_status)==null?void 0:ne.id)||1,work_place_id:((se=n==null?void 0:n.work_place)==null?void 0:se.id)||1,min_age:(n==null?void 0:n.min_age)||18,max_age:(n==null?void 0:n.max_age)||60,responsibilities:(n==null?void 0:n.responsibilities)||"",education:(n==null?void 0:n.education)||"",experience:(n==null?void 0:n.experience)||"",skills:(n==null?void 0:n.skills)||"",show_salary:(n==null?void 0:n.show_salary)||0,min_salary:(n==null?void 0:n.min_salary)||0,max_salary:(n==null?void 0:n.max_salary)||0,status:(n==null?void 0:n.status)||"active"}});async function xe(l){try{n?(await h({jobPostId:n.id,updatedJobPost:l}),Z.success("Job Post updated successfully"),s()):(await m(l),Z.success("Job Post created successfully"),s())}catch(i){console.log(i)}}return e.jsx(e.Fragment,{children:y||S?e.jsx("div",{className:"h-56",children:e.jsx(b,{})}):e.jsx(me,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(xe),className:" space-y-3 ",children:[e.jsx(r,{control:d.control,name:"title",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Title"}),e.jsx(t,{children:e.jsx(f,{placeholder:"Enter Title ",...l})}),e.jsx(j,{})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx(r,{control:d.control,name:"date",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Date"}),e.jsx(t,{children:e.jsx(f,{type:"date",placeholder:"Enter Date",...l})}),e.jsx(j,{})]})}),e.jsx(r,{control:d.control,name:"deadline",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Deadline"}),e.jsx(t,{children:e.jsx(f,{type:"date",placeholder:"Enter Deadline",...l})}),e.jsx(j,{})]})}),e.jsx(r,{control:d.control,name:"department_id",render:({field:l})=>{var i;return e.jsxs(o,{children:[e.jsx(x,{children:"Department name"}),e.jsxs(N,{onValueChange:l.onChange,defaultValue:(i=n==null?void 0:n.department)!=null&&i.id?String(n.department.id):void 0,children:[e.jsx(t,{children:e.jsx(C,{children:e.jsx(P,{placeholder:"Select Department"})})}),e.jsx(w,{children:F?e.jsx(b,{}):z==null?void 0:z.map(c=>e.jsx(g,{value:String(c.id),children:c.name},c.id))})]}),e.jsx(j,{})]})}}),e.jsx(r,{control:d.control,name:"organization_id",render:({field:l})=>{var i;return e.jsxs(o,{children:[e.jsx(x,{children:"Organization name"}),e.jsxs(N,{onValueChange:l.onChange,defaultValue:(i=n==null?void 0:n.organization)!=null&&i.id?String(n.organization.id):void 0,children:[e.jsx(t,{children:e.jsx(C,{children:e.jsx(P,{placeholder:"Select Organization"})})}),e.jsx(w,{children:_?e.jsx(b,{}):K==null?void 0:K.map(c=>e.jsx(g,{value:String(c.id),children:c.name},c.id))})]}),e.jsx(j,{})]})}}),e.jsx(r,{control:d.control,name:"designation_id",render:({field:l})=>{var i,c;return e.jsxs(o,{children:[e.jsx(x,{children:"Designation Name"}),e.jsxs(N,{onValueChange:l.onChange,defaultValue:(i=n==null?void 0:n.designation)!=null&&i.id?String((c=n==null?void 0:n.designation)==null?void 0:c.id):void 0,children:[e.jsx(t,{children:e.jsx(C,{children:e.jsx(P,{placeholder:"Select Designation"})})}),e.jsx(w,{children:J?e.jsx(b,{}):q==null?void 0:q.map(L=>e.jsx(g,{value:String(L.id),children:L.name},L.id))})]}),e.jsx(j,{})]})}}),e.jsx(r,{control:d.control,name:"location_id",render:({field:l})=>{var i;return e.jsxs(o,{children:[e.jsx(x,{children:"Location"}),e.jsxs(N,{onValueChange:l.onChange,defaultValue:(i=n==null?void 0:n.location)!=null&&i.id?String(n==null?void 0:n.location.id):void 0,children:[e.jsx(t,{children:e.jsx(C,{children:e.jsx(P,{placeholder:"Select Location"})})}),e.jsx(w,{children:de?e.jsx(b,{}):u==null?void 0:u.map(c=>e.jsx(g,{value:String(c.id),children:c.name},c.id))})]}),e.jsx(j,{})]})}}),e.jsx(r,{control:d.control,name:"vacancy_requisition_id",render:({field:l})=>{var i;return e.jsxs(o,{children:[e.jsx(x,{children:"Vacancy Requisition"}),e.jsxs(N,{onValueChange:l.onChange,defaultValue:(i=n==null?void 0:n.vacancy_requisition)!=null&&i.id?String(n==null?void 0:n.vacancy_requisition.id):void 0,children:[e.jsx(t,{children:e.jsx(C,{children:e.jsx(P,{placeholder:"Select Vacancy Requisition"})})}),e.jsx(w,{children:ie?e.jsx(b,{}):G==null?void 0:G.map(c=>e.jsx(g,{value:String(c.id),children:c.name},c.id))})]}),e.jsx(j,{})]})}}),e.jsx(r,{control:d.control,name:"vacancy_number",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Vacancy Number"}),e.jsx(t,{children:e.jsx(f,{type:"number",placeholder:"Enter requisition hour",...l})}),e.jsx(j,{})]})}),e.jsx(r,{control:d.control,name:"employment_status_id",render:({field:l})=>{var i;return e.jsxs(o,{children:[e.jsx(x,{children:"Employment Status"}),e.jsxs(N,{onValueChange:l.onChange,defaultValue:(i=n==null?void 0:n.employment_status)!=null&&i.id?String(n.employment_status.id):void 0,children:[e.jsx(t,{children:e.jsx(C,{children:e.jsx(P,{placeholder:"Select Employment Status"})})}),e.jsx(w,{children:re?e.jsx(b,{}):Q==null?void 0:Q.map(c=>e.jsx(g,{value:String(c.id),children:c.name},c.id))})]}),e.jsx(j,{})]})}}),e.jsx(r,{control:d.control,name:"work_place_id",render:({field:l})=>{var i,c;return e.jsxs(o,{children:[e.jsx(x,{children:"Work Place"}),e.jsxs(N,{onValueChange:l.onChange,defaultValue:(i=n==null?void 0:n.work_place)!=null&&i.id?String((c=n==null?void 0:n.work_place)==null?void 0:c.id):void 0,children:[e.jsx(t,{children:e.jsx(C,{children:e.jsx(P,{placeholder:"Select Work Place"})})}),e.jsx(w,{children:oe?e.jsx(b,{}):$==null?void 0:$.map(L=>e.jsx(g,{value:String(L.id),children:L.name},L.id))})]}),e.jsx(j,{})]})}}),e.jsx(r,{control:d.control,name:"sorting_index",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Sorting"}),e.jsx(t,{children:e.jsx(f,{type:"number",placeholder:"Enter job sorting",...l})}),e.jsx(j,{})]})}),e.jsx(r,{control:d.control,name:"status",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Status"}),e.jsxs(N,{onValueChange:l.onChange,defaultValue:(n==null?void 0:n.status)||"Active",children:[e.jsx(t,{children:e.jsx(C,{children:e.jsx(P,{placeholder:""})})}),e.jsxs(w,{children:[e.jsx(g,{value:"Active",children:"Active"}),e.jsx(g,{value:"Inactive",children:"Inactive"})]})]}),e.jsx(j,{})]})}),e.jsx(r,{control:d.control,name:"responsibilities",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Responsibilities"}),e.jsx(t,{children:e.jsx(k,{placeholder:"Enter responsibilities name",...l})}),e.jsx(j,{})]})}),e.jsx(r,{control:d.control,name:"education",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Education"}),e.jsx(t,{children:e.jsx(k,{placeholder:"Enter education",...l})}),e.jsx(j,{})]})}),e.jsx(r,{control:d.control,name:"experience",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Experience"}),e.jsx(t,{children:e.jsx(k,{placeholder:"Enter experience",...l})}),e.jsx(j,{})]})}),e.jsx(r,{control:d.control,name:"skills",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Skills"}),e.jsx(t,{children:e.jsx(k,{placeholder:"Enter skills",...l})}),e.jsx(j,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsx(r,{control:d.control,name:"min_age",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Minimum Age"}),e.jsx(t,{children:e.jsx(f,{type:"number",placeholder:"Enter minimum age limit",...l})}),e.jsx(j,{})]})}),e.jsx(r,{control:d.control,name:"max_age",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Maximum Age"}),e.jsx(t,{children:e.jsx(f,{type:"number",placeholder:"Enter maximum age limit",...l})}),e.jsx(j,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsx(r,{control:d.control,name:"min_salary",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Minimum Salary"}),e.jsx(t,{children:e.jsx(f,{type:"number",placeholder:"Enter minimum salary limit",...l})}),e.jsx(j,{})]})}),e.jsx(r,{control:d.control,name:"max_salary",render:({field:l})=>e.jsxs(o,{children:[e.jsx(x,{children:"Maximum Salary"}),e.jsx(t,{children:e.jsx(f,{type:"number",placeholder:"Enter maximum salary limit",...l})}),e.jsx(j,{})]})}),e.jsx(r,{control:d.control,name:"show_salary",render:({field:l})=>e.jsxs(o,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(x,{children:"Show Salary"})}),e.jsx(t,{children:e.jsx(Me,{checked:l.value===1,onCheckedChange:i=>l.onChange(i?1:0)})})]})})]}),e.jsx("div",{children:e.jsx(E,{variant:"default",type:"submit",className:"w-full mt-4",children:n?"Update":"Add"})})]})})})}const Te=({data:s})=>{var n,m,y,h,S,a,_;return e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Title:"}),e.jsx("div",{children:s.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Date:"}),e.jsx("div",{children:s.date})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Deadline:"}),e.jsx("div",{children:s.deadline})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Department:"}),e.jsx("div",{children:(n=s.department)==null?void 0:n.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Organization:"}),e.jsx("div",{children:(m=s.organization)==null?void 0:m.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Designation:"}),e.jsx("div",{children:(y=s.designation)==null?void 0:y.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Location:"}),e.jsx("div",{children:(h=s.location)==null?void 0:h.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Vacancy Requisition:"}),e.jsx("div",{children:(S=s.vacancy_requisition)==null?void 0:S.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Vacancy Number:"}),e.jsx("div",{children:s.vacancy_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Employment Status:"}),e.jsx("div",{children:(a=s.employment_status)==null?void 0:a.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Work Place:"}),e.jsx("div",{children:(_=s.work_place)==null?void 0:_.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Sorting Index:"}),e.jsx("div",{children:s.sorting_index})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Status:"}),e.jsx("div",{children:s.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Responsibilities:"}),e.jsx("div",{children:s.responsibilities})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Education:"}),e.jsx("div",{children:s.education})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Experience:"}),e.jsx("div",{children:s.experience})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Skills:"}),e.jsx("div",{children:s.skills})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Minimum Age:"}),e.jsx("div",{children:s.min_age})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Maximum Age:"}),e.jsx("div",{children:s.max_age})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Minimum Salary:"}),e.jsx("div",{children:s.min_salary})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Maximum Salary:"}),e.jsx("div",{children:s.max_salary})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Show Salary:"}),e.jsx("div",{children:s.show_salary===1?"Yes":"No"})]})]})})};function Re({data:s}){const[n,m]=A.useState(!1),[y,h]=A.useState(!1),[S,a]=A.useState(!1),[_,{isLoading:V}]=Ae(),F=async M=>{try{await _(M),Z.success("Job deleted successfully"),m(!1)}catch(J){console.log(J)}};return e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(U,{children:e.jsxs(W,{children:[e.jsx(H,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>h(!0),children:e.jsx(fe,{className:"h-4 w-4 text-foreground"})})}),e.jsx(B,{children:e.jsx("p",{children:"Update Job Post"})})]})}),e.jsx(U,{children:e.jsxs(W,{children:[e.jsx(H,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>{a(!0)},children:e.jsx(Ie,{className:"h-4 w-4 text-foreground"})})}),e.jsx(B,{children:e.jsx("p",{children:"Delete Requisition"})})]})}),e.jsx(U,{children:e.jsxs(W,{children:[e.jsx(H,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>{m(!0)},children:e.jsx(be,{className:"h-4 w-4 text-foreground"})})}),e.jsx(B,{children:e.jsx("p",{children:"Delete Requisition"})})]})}),e.jsx(ye,{title:"Are you sure?",description:"This action cannot be undone.",name:s.title,isOpen:n,onClose:()=>m(!1),onConfirm:()=>F(s.id),loading:V}),e.jsx(p,{title:"Update Job",isOpen:y,toggleModal:()=>h(!1),className:"w-[90%] max-w-6xl",children:e.jsx(ce,{data:s,modalClose:()=>h(!1)})}),e.jsx(p,{title:"Job Details",isOpen:S,toggleModal:()=>a(!1),className:"w-[90%] max-w-6xl",children:e.jsx(Te,{data:s})})]})}const ze=[{id:"select",header:({table:s})=>e.jsx(le,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:n=>s.toggleAllPageRowsSelected(!!n),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:s})=>e.jsx(le,{checked:s.getIsSelected(),onCheckedChange:n=>s.toggleSelected(!!n),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"title",header:"Job title"},{accessorKey:"",accessorFn:({department:s})=>s==null?void 0:s.name,header:"Department"},{accessorKey:"",accessorFn:({organization:s})=>s==null?void 0:s.name,header:"Organization"},{accessorKey:"",accessorFn:({designation:s})=>s==null?void 0:s.name,header:"Designation"},{accessorKey:"location",accessorFn:({location:s})=>s==null?void 0:s.name,header:"Location"},{accessorKey:"vacancy_requisition",accessorFn:({vacancy_requisition:s})=>s==null?void 0:s.name,header:"Vacancy requisition"},{accessorKey:"vacancy_number",header:"Vacancy number"},{accessorKey:"employment_status",accessorFn:({employment_status:s})=>s==null?void 0:s.name,header:"Employment status"},{accessorKey:"work_place",accessorFn:({work_place:s})=>s==null?void 0:s.name,header:"Work place"},{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"Actions"}),enableSorting:!1,cell:({row:s})=>e.jsx(Re,{data:s.original})}],rn=()=>{const[s,n]=A.useState(!1),[m,y]=te.useState({pageIndex:0,pageSize:10}),{data:h,isLoading:S}=Fe(`per_page=${m.pageSize}&page=${m.pageIndex+1}`),a=(h==null?void 0:h.data)||[],_=h==null?void 0:h.meta;return S?e.jsx(b,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{title:"Job Post",description:"Manage job post for you business"}),e.jsxs(E,{onClick:()=>n(!0),size:"sm",children:[e.jsx(Oe,{className:"mr-2 h-4 w-4"})," Add Job Post"]})]}),e.jsx(ge,{}),a&&e.jsx("div",{children:e.jsx(Se,{columns:ze,data:a,paginationInfo:_,pagination:m,setPagination:y})})]})}),e.jsx(p,{title:"Add Job Post",isOpen:s,toggleModal:()=>n(!1),className:"w-[90%] max-w-6xl",children:e.jsx(ce,{modalClose:()=>n(!1)})})]})};export{rn as default};
