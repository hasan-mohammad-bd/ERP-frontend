import{bp as z,a as e,Y as b,bd as E,be as M,bf as D,bg as n,bh as K,bi as l,cu as R,b$ as k,c2 as B,c3 as G,c1 as Q,r as d,bm as H,bV as g,X as P,c4 as q,ad as C,ax as T,t as I,aw as W,aL as Y,a$ as J,bo as O,cv as U}from"./index-a843aaab.js";const V=z.injectEndpoints({endpoints:s=>({getAttendanceSummary:s.query({query:a=>`attendance-summary-report?${a}`,providesTags:["attendance-summary-report"]})}),overrideExisting:!1}),{useGetAttendanceSummaryQuery:X}=V,Z=({tableData:s})=>e.jsxs(b,{children:[" ",e.jsxs(E,{className:"",children:[e.jsx(M,{children:e.jsxs(D,{children:[e.jsx(n,{children:"Employee Id"}),e.jsx(n,{children:"Employee Name"}),e.jsx(n,{children:"Late"}),e.jsx(n,{children:"Extreme Late"}),e.jsx(n,{children:"On Time"}),e.jsx(n,{children:"Working Days"}),e.jsx(n,{children:"Present Days"}),e.jsx(n,{children:"Absent Days"}),e.jsx(n,{children:"Total Days"}),e.jsx(n,{children:"Total Hours"})]})}),e.jsx(K,{className:"",children:s&&s.map(a=>{var c,i;return e.jsxs(D,{className:"",children:[e.jsx(l,{className:"",children:a==null?void 0:a.employee_id}),e.jsx(l,{className:"",children:a==null?void 0:a.employee_name}),e.jsx(l,{children:a.late}),e.jsx(l,{children:a==null?void 0:a.extreme_late}),e.jsx(l,{children:a==null?void 0:a.on_time}),e.jsx(l,{children:a==null?void 0:a.working_days}),e.jsx(l,{children:a==null?void 0:a.present_days}),e.jsx(l,{children:a==null?void 0:a.absent_days}),e.jsx(l,{children:(c=a==null?void 0:a.leaves)==null?void 0:c.total_days}),e.jsx(l,{children:(i=a==null?void 0:a.leaves)==null?void 0:i.total_hours})]},a==null?void 0:a.employee_id)})}),e.jsx(R,{})]})]});function ee({setFilterParams:s}){const[a,{data:c}]=k(),[i,{data:u}]=B(),[m,{data:p}]=G(),[r,{data:y}]=Q(),[o,S]=d.useState(void 0),[x,N]=d.useState(void 0),[f,_]=d.useState(void 0),[v,w]=d.useState(void 0),[j,A]=d.useState(new Date),L=()=>{const t=j?C(j,"yyyy-MM"):"",h=new URLSearchParams;o&&h.append("department_id",o.id.toString()),x&&h.append("location_id",x.id.toString()),f&&h.append("schedule_id",f.id.toString()),v&&h.append("section_id",v.id.toString()),j&&h.append("date",t.toString());const $=h.toString();s($),T.success("Filters applied successfully")},F=()=>{S(void 0),N(void 0),_(void 0),w(void 0),A(new Date),s(""),T.success("Filters reset successfully")};return e.jsx(b,{className:"w-full p-5",children:e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx("div",{className:"space-y-2 flex flex-col py-0",children:e.jsx(H,{selected:j,onChange:t=>{A(t??new Date)},dateFormat:"MM/yyyy",showMonthYearPicker:!0,placeholderText:"Select date",className:"border rounded p-[6px] w-full bg-none bg_remove"})}),e.jsx(g,{items:(c==null?void 0:c.data)||[],labelKey:"name",valueKey:"id",value:o,placeholder:"Select Department",onSelect:S,onChangeSearch:t=>a(`text=${t}`)}),e.jsx(g,{items:(u==null?void 0:u.data)||[],labelKey:"name",valueKey:"id",value:x,placeholder:"Select Location",onSelect:N,onChangeSearch:t=>i(`text=${t}`)}),e.jsx(g,{items:(p==null?void 0:p.data)||[],labelKey:"name",valueKey:"id",value:f,placeholder:"Select Shift",onSelect:_,onChangeSearch:t=>m(`text=${t}`)}),e.jsx(g,{items:(y==null?void 0:y.data)||[],labelKey:"name",valueKey:"id",value:v,placeholder:"Select Section",onSelect:w,onChangeSearch:t=>r(`text=${t}`)}),e.jsx(P,{variant:"outline",size:"sm",onClick:F,children:"Reset Filters"}),e.jsxs(P,{variant:"default",size:"sm",onClick:L,children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Apply Filters"]})]})})}const se=()=>{var x;const{user:s}=I(),[a,c]=d.useState(1),[i,u]=d.useState(10),[m,p]=d.useState(`date=${C(new Date,"yyyy-MM")}`),{data:r,isLoading:y}=X(`per_page=${i}&page=${a}&${m}`),o=(r==null?void 0:r.data)||[],S=r==null?void 0:r.meta;return y?e.jsx(W,{}):e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(Y,{title:"Attendance Summary Report",description:"Manage Attendance Summary Report for you business"})}),e.jsx(J,{}),e.jsx("div",{className:"",children:e.jsx(ee,{setFilterParams:p})}),e.jsx("div",{children:e.jsxs(b,{children:[e.jsxs(O,{className:"space-y-4",fileName:"attendance-summary-report",children:[e.jsx("div",{className:"flex-1 space-y-4 my-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{children:(x=s==null?void 0:s.organization)==null?void 0:x.name}),e.jsx("h3",{className:"text-xl",children:"Attendance Summary"})]})}),o?e.jsx(Z,{tableData:o}):null]}),S&&e.jsx(U,{className:"px-4 pb-4",meta:S,dataCount:o.length,onPageChange:c,onPageSizeChange:u})]})})]})};export{se as default};
