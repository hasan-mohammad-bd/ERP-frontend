import{a as e,r as t,au as G,av as H,ac as A,ad as w,ae as K,B as x,ag as D,af as J,ah as V,ai as B,aj as I,a9 as C,ak as Q,$ as q,a0 as W,a2 as X,a3 as Y,aw as Z,a4 as ee,a5 as ae,a6 as se,y as te,z as le,D as z,ax as ne,E as oe,F as ie,al as ce,at as de,ay as re,az as pe,aA as me,aB as ue,aC as he,aD as ye,aE as ge,U as xe,aF as g,aG as Se,R as fe,aH as je,am as ve,t as Ce,aI as be,aJ as Ne,ao as Ee}from"./index-27772510.js";import{C as _e}from"./circle-dollar-sign-95d1f051.js";import{u as Fe,e as Pe}from"./attendance-policy-mapping-0f16ba7e.js";import{u as Ae}from"./index-8a02b30a.js";const we=()=>e.jsx("div",{});function Ke({data:a}){const[l,r]=t.useState(!1),[o,u]=t.useState(!1),s=G(),[i,{isLoading:n}]=H(),c=async d=>{try{await i(d),C.success("Job Candidate deleted successfully"),r(!1)}catch(h){console.log(h)}};return e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(A,{children:e.jsxs(w,{children:[e.jsx(K,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>s(`/hrm/salary-setup/${a.id}`),className:"hover:bg-secondary",children:e.jsx(_e,{className:"h-4 w-4 text-foreground"})})}),e.jsx(D,{children:e.jsx("p",{children:"Update Employee Salary Setup"})})]})}),e.jsx(A,{children:e.jsxs(w,{children:[e.jsx(K,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>s(`/hrm/employees-list/edit/${a.id}`),children:e.jsx(J,{className:"h-4 w-4 text-foreground"})})}),e.jsx(D,{children:e.jsx("p",{children:"Update Employee"})})]})}),e.jsx(A,{children:e.jsxs(w,{children:[e.jsx(K,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>{r(!0)},children:e.jsx(V,{className:"h-4 w-4 text-foreground"})})}),e.jsx(D,{children:e.jsx("p",{children:"Delete employee"})})]})}),e.jsx(B,{title:"Are you sure?",description:"This action cannot be undone.",name:a.first_name,isOpen:l,onClose:()=>r(!1),onConfirm:()=>c(a.id),loading:n}),o&&e.jsx(I,{title:"Job Details",isOpen:o,toggleModal:()=>u(!1),className:"w-[90%] max-w-6xl",children:e.jsx(we,{})})]})}const De=[{id:"select",header:({table:a})=>e.jsx(Q,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:l=>a.toggleAllPageRowsSelected(!!l),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:a})=>e.jsx(Q,{checked:a.getIsSelected(),onCheckedChange:l=>a.toggleSelected(!!l),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"first_name",header:"First name"},{accessorKey:"last_name",header:"Last name"},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{accessorKey:"",accessorFn:({department:a})=>a==null?void 0:a.name,header:"Department"},{accessorKey:"location",accessorFn:({location:a})=>a==null?void 0:a.name,header:"Location"},{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"Actions"}),enableSorting:!1,cell:({row:a})=>e.jsx(Ke,{data:a.original})}];function Ge({payload:a,modelClose:l}){const[r,o]=t.useState(!1),[u,{isLoading:s}]=Fe(),[i,n]=t.useState(null),c=G(),{data:d,isLoading:h}=Ae("per_page=1000&page=1"),S=(d==null?void 0:d.data)||[],y=q({resolver:W(Pe),defaultValues:{employee_ids:a==null?void 0:a.map(p=>p.id),effective_date:new Date().toISOString().split("T")[0]}}),b=p=>{p&&(n(p),y.setValue("effective_date",`${z(p,"yyyy-MM-dd")}`),o(!1))};async function j(p){const v={...p,employee_ids:(a==null?void 0:a.map(f=>f.id))||[]};try{await u(v),C.success("Employee Attendance Policy created successfully"),l&&l(),c("/hrm/attendance-policy-mapping")}catch(f){console.log(f)}}return e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"h-[535px]",children:e.jsx(X,{})}):e.jsx("div",{className:"flex gap-x-4",children:e.jsx("div",{className:" w-full ",children:e.jsx(Y,{...y,children:e.jsxs("form",{onSubmit:y.handleSubmit(j),className:"",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx("div",{className:"w-full",children:e.jsx(Z,{loading:h,data:S,displayField:"name",valueField:"id",form:y,name:"attendance_policy_id",title:"Attendance Policy",className:"w-[460px]"})}),e.jsx(ee,{control:y.control,name:"effective_date",render:()=>e.jsxs(ae,{children:[e.jsx(se,{children:"Effective Date"}),e.jsxs(te,{open:r,onOpenChange:o,children:[e.jsx(le,{asChild:!0,className:"",children:e.jsxs(x,{variant:"outline",className:`w-full justify-start text-left font-normal ${!i&&"text-muted-foreground"}`,children:[i?z(i,"PP"):"Pick a date",e.jsx(ne,{className:"ml-auto h-4 w-4 opacity-50"})]})}),e.jsx(oe,{className:"w-auto p-0",align:"start",children:e.jsx(ie,{mode:"single",selected:i??void 0,onSelect:b,initialFocus:!0})})]})]})})]}),e.jsx("div",{children:e.jsx(x,{variant:"default",type:"submit",className:"w-full mt-4",children:"Save"})})]})})})})})}function ke({setFilterParams:a}){const{data:l}=ce("per_page=1000"),{data:r}=de("per_page=1000"),{data:o}=re("per_page=1000"),{data:u}=pe("per_page=1000"),{data:s}=me(),{data:i}=ue("per_page=1000"),{data:n}=he(),{data:c}=ye("per_page=1000"),{data:d}=ge("per_page=1000"),[h,S]=t.useState(void 0),[y,b]=t.useState(void 0),[j,p]=t.useState(void 0),[v,f]=t.useState(void 0),[N,k]=t.useState(void 0),[E,M]=t.useState(void 0),[_,L]=t.useState(void 0),[F,R]=t.useState(void 0),[P,O]=t.useState(void 0),$=()=>{const m=new URLSearchParams;h&&m.append("department_id",h.id.toString()),y&&m.append("designation_id",y.id.toString()),j&&m.append("location_id",j.id.toString()),v&&m.append("section_id",v.id.toString()),N&&m.append("employment_status_id",N.id.toString()),E&&m.append("schedule_id",E.id.toString()),_&&m.append("gender_id",_.id.toString()),F&&m.append("employee_class_id",F.id.toString()),P&&m.append("employee_grade_id",P.id.toString());const T=m.toString();console.log(T),a(T),C.success("Filters applied successfully")},U=()=>{S(void 0),b(void 0),p(void 0),f(void 0),k(void 0),M(void 0),L(void 0),R(void 0),O(void 0),a(""),C.success("Filters reset successfully")};return e.jsxs(xe,{className:"w-full p-5",children:[e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx(g,{items:(l==null?void 0:l.data)||[],labelKey:"name",valueKey:"id",value:h,placeholder:"Select Department",onSelect:S}),e.jsx(g,{items:(r==null?void 0:r.data)||[],labelKey:"name",valueKey:"id",value:y,placeholder:"Select Designation",onSelect:b}),e.jsx(g,{items:(u==null?void 0:u.data)||[],labelKey:"name",valueKey:"id",value:j,placeholder:"Select Branch",onSelect:p}),e.jsx(g,{items:(o==null?void 0:o.data)||[],labelKey:"name",valueKey:"id",value:v,placeholder:"Select Section",onSelect:f}),e.jsx(g,{items:(s==null?void 0:s.data)||[],labelKey:"name",valueKey:"id",value:N,placeholder:"Select Status",onSelect:k}),e.jsx(g,{items:(i==null?void 0:i.data)||[],labelKey:"name",valueKey:"id",value:E,placeholder:"Select Shift",onSelect:M}),e.jsx(g,{items:(n==null?void 0:n.data)||[],labelKey:"name",valueKey:"id",value:_,placeholder:"Select Gender",onSelect:L}),e.jsx(g,{items:(c==null?void 0:c.data)||[],labelKey:"name",valueKey:"id",value:F,placeholder:"Select Class",onSelect:R}),e.jsx(g,{items:(d==null?void 0:d.data)||[],labelKey:"name",valueKey:"id",value:P,placeholder:"Select Grade",onSelect:O})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-4",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:U,children:"Reset Filters"}),e.jsxs(x,{variant:"default",size:"sm",onClick:$,children:[e.jsx(Se,{className:"mr-2 h-4 w-4"}),"Apply Filters"]})]})]})}const Me=[{label:"Enable Roster",value:"enable-roster"},{label:"Attendance Policy Mapping",value:"attendance-policy-mapping"},{label:"Delete Selected",value:"delete-selected"}],Qe=()=>{const a=G(),[l,r]=t.useState(""),[o,u]=fe.useState({pageIndex:0,pageSize:10}),{data:s,isLoading:i}=je(`per_page=${o.pageSize}&page=${o.pageIndex+1}${l}{}`),[n,c]=t.useState({action:"",payload:[]}),d=(s==null?void 0:s.data)||[],h=s==null?void 0:s.meta,S=()=>{console.log("Handle Employee Roster Change"),console.log(n),C.success("Employee roster updated successfully"),c({action:"",payload:[]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ve,{title:"Employees",description:"Manage employees for you business"}),e.jsxs(x,{onClick:()=>a("/hrm/employees-list/add"),size:"sm",children:[e.jsx(Ce,{className:"mr-2 h-4 w-4"})," Add Employee"]})]}),e.jsx(be,{}),e.jsx(ke,{setFilterParams:r}),i&&e.jsx(Ne,{}),d&&!i&&e.jsx("div",{children:e.jsx(Ee,{columns:De,data:d,bulkActions:Me,onBulkSelectChange:c,paginationInfo:h,pagination:o,setPagination:u})})]})}),n.action==="enable-roster"&&e.jsx(B,{title:"Enable Employee Roster?",description:"This action can be changed later",alertMessage:"Are you sure you want to update employee roster status?",type:"default",isOpen:n.action==="enable-roster",onClose:()=>c({action:"",payload:[]}),onConfirm:S}),n.action==="attendance-policy-mapping"&&e.jsx(I,{title:"Attendance Policy Mapping",toggleModal:()=>c({action:"",payload:[]}),isOpen:n.action==="attendance-policy-mapping",className:"!h-fit",children:e.jsx(Ge,{payload:n.payload,modelClose:()=>c({action:"",payload:[]})})})]})};export{Qe as default};
