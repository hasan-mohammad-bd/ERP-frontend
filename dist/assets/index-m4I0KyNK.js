import{b4 as Q,k as e,b6 as S,b7 as c,L as Y,n as Z,U as J,b8 as K,b9 as W,ba as A,bb as X,r as M,Z as P,a0 as q,a1 as E,a2 as $,a3 as j,a4 as u,a5 as h,ao as T,a6 as m,ap as L,aq as w,ar as k,as as o,a7 as p,I as v,M as G,bc as D,a9 as R,bd as ee,R as se,be as ne,aj as ae,P as F,ak as ce,ah as O}from"./index-Bfkd3eDF.js";import{T as le,a as re,b as te,c as de}from"./tabs-QxpUuf4i.js";import{B}from"./badge-UbO2VXbY.js";import{S as ie}from"./switch-zmYhKBRR.js";const oe=Q.injectEndpoints({endpoints:d=>({getLedgerGroups:d.query({query:()=>"ledger-groups?tree=1",providesTags:["ledger-groups-tree"]}),getLedgerGroupsArray:d.query({query:()=>"ledger-groups",providesTags:["ledger-groups-array"]}),createLedgerGroup:d.mutation({query:s=>({url:"ledger-groups",method:"POST",body:s}),invalidatesTags:["ledger-groups","ledger-groups-tree","ledger-groups-array"]}),removeLedgerGroup:d.mutation({query:s=>({url:`ledger-groups/${s}`,method:"DELETE"}),invalidatesTags:["ledger-groups"]}),updateLedgerGroup:d.mutation({query:({ledgerGroupId:s,updatedLedgerGroup:l})=>({url:`ledger-groups/${s}`,method:"PUT",body:l}),invalidatesTags:["ledger-groups"]})}),overrideExisting:!1}),{useGetLedgerGroupsQuery:xe,useGetLedgerGroupsArrayQuery:z,useCreateLedgerGroupMutation:he,useRemoveLedgerGroupMutation:be,useUpdateLedgerGroupMutation:Ne}=oe,H=({group:d,coaType:s})=>d.childs_group.map(l=>e.jsxs(e.Fragment,{children:[e.jsxs(S,{children:[e.jsxs(c,{className:"py-2.5 col-span-2 w-2/3 font-medium",children:["    ",l.name]}),e.jsx(c,{className:"py-2.5",children:l.code}),e.jsx(c,{className:"py-2.5",children:"Group"}),e.jsx(c,{className:"py-2.5"}),e.jsx(c,{className:"py-2.5"}),e.jsx(c,{className:"py-2.5"})]},l.id),l.childs_group.length>0&&e.jsx(H,{group:l,coaType:s}),l.ledgers.map(t=>e.jsxs(S,{children:[e.jsx(c,{className:"py-0 col-span-2 w-2/3",children:e.jsxs(Y,{className:Z({variant:"link",size:"sm",className:"text-blue-400 hover:no-underline"}),to:`/accounts/${s}/${t.id}`,children:["    ",t.name]})}),e.jsx(c,{className:"py-2.5",children:t.code}),e.jsx(c,{className:"py-2.5",children:"Account"}),e.jsx(c,{className:"py-2.5",children:e.jsx(B,{variant:"outline",children:"active"})}),e.jsx(c,{className:"py-2.5",children:"700"}),e.jsx(c,{className:"py-2.5",children:"500"})]},t.id))]})),je=({data:d,coaType:s})=>{const l=d.find(t=>t.name===s);return l?e.jsx(J,{className:"mt-4",children:e.jsxs(K,{children:[e.jsx(W,{children:e.jsxs(S,{children:[e.jsx(A,{className:"py-2.5 h-8 col-span-2 w-2/3",children:"Name"}),e.jsx(A,{className:"py-2.5 h-8 w-[100px]",children:"Code"}),e.jsx(A,{className:"py-2.5 h-8",children:"Type"}),e.jsx(A,{className:"py-2.5 h-8",children:"Status"}),e.jsx(A,{className:"py-2.5 h-8",children:"Debit"}),e.jsx(A,{className:"py-2.5 h-8",children:"Credit"})]})}),e.jsxs(X,{children:[e.jsxs(S,{children:[e.jsx(c,{className:"py-2.5 col-span-2 w-2/3 font-medium",children:l.name}),e.jsx(c,{className:"py-2.5",children:l.code}),e.jsx(c,{className:"py-2.5",children:"Group"}),e.jsx(c,{className:"py-2.5"}),e.jsx(c,{className:"py-2.5"}),e.jsx(c,{className:"py-2.5"})]}),e.jsx(H,{group:l,coaType:s}),l.ledgers.map(t=>e.jsxs(S,{children:[e.jsx(c,{className:"py-2.5 col-span-2 w-2/3",children:t.name}),e.jsx(c,{className:"py-2.5",children:t.code}),e.jsx(c,{className:"py-2.5",children:"Account"}),e.jsx(c,{className:"py-2.5",children:e.jsx(B,{variant:"secondary",children:"Inactive"})}),e.jsx(c,{className:"py-2.5",children:"700"}),e.jsx(c,{className:"py-2.5",children:"500"})]},t.id))]})]})}):null},I=[{type:"Assets",title:"Assets",description:"Manage assets for your business"},{type:"Liabilities",title:"Liabilities",description:"Manage liabilities for your business"},{type:"Income",title:"Incomes",description:"Manage incomes for your business"},{type:"Expenses",title:"Expenses",description:"Manage expenses for your business"}];function ue({modalClose:d,rowData:s}){const[l,{isLoading:t}]=he(),{data:y,isLoading:f}=z(),[N,i]=M.useState("Assets"),_=(y==null?void 0:y.data)||[],x=_==null?void 0:_.filter(r=>(r==null?void 0:r.type)===N),b=P({resolver:q(D),defaultValues:{parent_id:(s==null?void 0:s.id)||0}});async function C(r){try{await l(r),R.success("Add ledger group successfully"),d()}catch(n){console.log(n)}}return e.jsx(e.Fragment,{children:t?e.jsx("div",{className:"h-56",children:e.jsx(E,{})}):e.jsx($,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(C),className:"w-full space-y-3",children:[(s==null?void 0:s.id)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Parent:"})," ",s==null?void 0:s.name]}),!(s!=null&&s.id)&&e.jsxs(e.Fragment,{children:[e.jsx(j,{name:"",render:()=>e.jsxs(u,{children:[e.jsx(h,{children:"Account Type"}),e.jsxs(T,{value:N,onValueChange:r=>{i(r)},children:[e.jsx(m,{children:e.jsx(L,{children:e.jsx(w,{placeholder:"Select Account Type"})})}),e.jsxs(k,{children:[e.jsx(o,{value:"Assets",children:"Assets"}),e.jsx(o,{value:"Liabilities",children:"Liabilities"}),e.jsx(o,{value:"Income",children:"Incomes"}),e.jsx(o,{value:"Expenses",children:"Expenses"})]})]}),e.jsx(p,{})]})}),(x==null?void 0:x.length)>0?e.jsx(j,{control:b.control,name:"parent_id",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Parent"}),e.jsxs(T,{onValueChange:r.onChange,children:[e.jsx(m,{children:e.jsx(L,{children:e.jsx(w,{placeholder:"Select Parent"})})}),e.jsx(k,{children:f?e.jsx(E,{}):x==null?void 0:x.map(n=>e.jsx(o,{value:String(n.id),children:n.name},n.id))})]}),e.jsx(p,{})]})}):null]}),e.jsx(j,{control:b.control,name:"code",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Code"}),e.jsx(m,{children:e.jsx(v,{placeholder:"Enter code",...r,value:r.value||""})}),e.jsx(p,{})]})}),e.jsx(j,{control:b.control,name:"name",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Name"}),e.jsx(m,{children:e.jsx(v,{placeholder:"Enter financial year name",...r})}),e.jsx(p,{})]})}),e.jsx("div",{children:e.jsx(G,{variant:"default",type:"submit",className:"w-full mt-4",children:"Add Group"})})]})})})}function me({modalClose:d,rowData:s,coaType:l}){const[t,{isLoading:y}]=ee(),[f,N]=se.useState(0),{data:i,isLoading:_}=z(),[x,b]=M.useState("Assets"),C=(i==null?void 0:i.data)||[],r=C==null?void 0:C.filter(a=>(a==null?void 0:a.type)===x),n=P({resolver:q(ne),defaultValues:{parent_id:(s==null?void 0:s.id)||0,is_fixed_asset:0,is_stock:0,is_cash_nature:0,is_bank_nature:0,is_sub_type:0}});async function U(a){try{await t(a),R.success("Add ledger account successfully"),d()}catch(g){console.log(g)}}const V=a=>{l==="Assets"||x==="Assets"?(n.setValue("is_fixed_asset",a==="is_fixed_asset"?1:0),n.setValue("is_stock",a==="is_stock"?1:0),n.setValue("is_cash_nature",a==="is_cash_nature"?1:0),n.setValue("is_bank_nature",a==="is_bank_nature"?1:0)):(n.setValue("is_fixed_asset",0),n.setValue("is_stock",0),n.setValue("is_cash_nature",0),n.setValue("is_bank_nature",0))};return e.jsx(e.Fragment,{children:y?e.jsx("div",{className:"h-56",children:e.jsx(E,{})}):e.jsx($,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(U),className:"w-full space-y-3",children:[(s==null?void 0:s.id)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Parent:"})," ",s==null?void 0:s.name]}),!(s!=null&&s.id)&&e.jsxs(e.Fragment,{children:[e.jsx(j,{name:"",render:()=>e.jsxs(u,{children:[e.jsx(h,{children:"Account Type"}),e.jsxs(T,{value:x,onValueChange:a=>{b(a)},children:[e.jsx(m,{children:e.jsx(L,{children:e.jsx(w,{placeholder:"Select Account Type"})})}),e.jsxs(k,{children:[e.jsx(o,{value:"Assets",children:"Assets"}),e.jsx(o,{value:"Liabilities",children:"Liabilities"}),e.jsx(o,{value:"Income",children:"Incomes"}),e.jsx(o,{value:"Expenses",children:"Expenses"})]})]}),e.jsx(p,{})]})}),(r==null?void 0:r.length)>0?e.jsx(j,{control:n.control,name:"parent_id",render:({field:a})=>e.jsxs(u,{children:[e.jsx(h,{children:"Parent"}),e.jsxs(T,{onValueChange:a.onChange,children:[e.jsx(m,{children:e.jsx(L,{children:e.jsx(w,{placeholder:"Select Parent"})})}),e.jsx(k,{children:_?e.jsx(E,{}):r==null?void 0:r.map(g=>e.jsx(o,{value:String(g.id),children:g.name},g.id))})]}),e.jsx(p,{})]})}):null]}),e.jsx(j,{control:n.control,name:"code",render:({field:a})=>e.jsxs(u,{children:[e.jsx(h,{children:"Code"}),e.jsx(m,{children:e.jsx(v,{placeholder:"Enter code",...a,value:a.value||""})}),e.jsx(p,{})]})}),e.jsx(j,{control:n.control,name:"name",render:({field:a})=>e.jsxs(u,{children:[e.jsx(h,{children:"Name"}),e.jsx(m,{children:e.jsx(v,{placeholder:"Enter ledger account name",...a})}),e.jsx(p,{})]})}),l==="Assets"||x==="Assets"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Nature"}),e.jsxs("div",{className:"flex items-center text-sm space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"nature",checked:!!n.watch("is_fixed_asset"),onChange:()=>V("is_fixed_asset")}),e.jsx("span",{children:"Fixed Asset"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"nature",checked:!!n.watch("is_stock"),onChange:()=>V("is_stock")}),e.jsx("span",{children:"Stock"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"nature",checked:!!n.watch("is_cash_nature"),onChange:()=>V("is_cash_nature")}),e.jsx("span",{children:"Cash Nature"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"nature",checked:!!n.watch("is_bank_nature"),onChange:()=>V("is_bank_nature")}),e.jsx("span",{children:"Bank Nature"})]})]})]}):null,e.jsx(j,{control:n.control,name:"is_sub_type",render:({field:a})=>e.jsxs(u,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(h,{children:"Is Sub Type"})}),e.jsx(m,{children:e.jsx(ie,{checked:a.value===1,onCheckedChange:g=>{a.onChange(g?1:0),N(g?1:0)}})})]})}),f===1&&e.jsx(j,{control:n.control,name:"sub_type",render:({field:a})=>e.jsxs(u,{children:[e.jsx(h,{children:"Sub Type"}),e.jsxs(T,{onValueChange:a.onChange,defaultValue:"None",children:[e.jsx(m,{children:e.jsx(L,{children:e.jsx(w,{placeholder:""})})}),e.jsxs(k,{children:[e.jsx(o,{value:"None",children:"None"}),e.jsx(o,{value:"Employee",children:"Employee"}),e.jsx(o,{value:"Customer",children:"Customer"}),e.jsx(o,{value:"Supplier",children:"Supplier"}),e.jsx(o,{value:"Agent",children:"Agent"})]})]}),e.jsx(p,{})]})}),e.jsx("div",{children:e.jsx(G,{variant:"default",type:"submit",className:"w-full mt-4",children:"Add Account"})})]})})})}const Ae=()=>{const{data:d,isLoading:s}=xe(),[l,t]=M.useState(!1),[y,f]=M.useState(!1),N=(d==null?void 0:d.data)||[];return s?e.jsx(E,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{title:"Chart Of Account",description:"Manage Chart of account for you business"}),e.jsxs("div",{className:"flex space-x-2 items-center",children:[e.jsxs(G,{onClick:()=>t(!0),size:"sm",children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Add Group"]}),e.jsxs(G,{onClick:()=>f(!0),size:"sm",children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Add Account"]})]})]}),e.jsx(ce,{}),e.jsxs(le,{defaultValue:I[0].type,className:"w-full mt-3",children:[e.jsx(re,{className:"w-fit",children:I.map(i=>e.jsx(te,{value:i.type,children:i.title},i.type))}),I.map(i=>e.jsx(de,{value:i.type,children:e.jsx(je,{title:i.title,coaType:i.type,description:i.description,data:N})},i.type))]}),l&&e.jsx(O,{title:"Add Group",isOpen:l,toggleModal:()=>t(!1),children:e.jsx(ue,{modalClose:()=>t(!1)})}),y&&e.jsx(O,{title:"Add Account",isOpen:y,toggleModal:()=>f(!1),children:e.jsx(me,{modalClose:()=>f(!1)})})]})};export{Ae as default};
