import{r as j,dP as y,D as m,a as e,aC as o,aD as d,aE as h,Y as l,dQ as f,aG as u,aF as P,aB as b,aH as C,aI as N,ay as S,az as D,aK as p,dD as x,L as w,dR as T,ax as k,aM as I,aN as K,aO as A,aP as L}from"./index-b7a2f218.js";function R({rowData:a}){const[s,i]=j.useState(!1),[n,{isLoading:t}]=y(),c=m(),r=async v=>{try{await n(v).unwrap(),S.success("Item deleted successfully"),i(!1)}catch(g){D(g),console.log(g)}};return e.jsxs("div",{className:"flex justify-center space-x-2 min-h-10",children:[e.jsx(o,{children:e.jsxs(d,{children:[e.jsx(h,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>c(`/billing/purchase-return/add/${a.id}`),children:e.jsx(f,{className:"h-4 w-4 text-foreground"})})}),e.jsx(u,{children:e.jsx("p",{children:"Return Purchase"})})]})}),e.jsx(o,{children:e.jsxs(d,{children:[e.jsx(h,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>c(`/billing/purchases/edit/${a.id}`),children:e.jsx(P,{className:"h-4 w-4 text-foreground"})})}),e.jsx(u,{children:e.jsx("p",{children:"Update Purchase"})})]})}),e.jsx(b,{roles:["purchases.delete"],children:e.jsx(o,{children:e.jsxs(d,{children:[e.jsx(h,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>{i(!0)},children:e.jsx(C,{className:"h-4 w-4 text-foreground"})})}),e.jsx(u,{children:e.jsx("p",{children:"Delete Purchase"})})]})})}),e.jsx(N,{title:"Are you sure?",description:"This action cannot be undone.",name:"This Purchase",isOpen:s,onClose:()=>i(!1),onConfirm:()=>r(a.id),loading:t})]})}const _=[{id:"select",header:({table:a})=>e.jsx(p,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:s=>a.toggleAllPageRowsSelected(!!s),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:a})=>e.jsx(p,{checked:a.getIsSelected(),onCheckedChange:s=>a.toggleSelected(!!s),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"date",header:"Date",cell:({row:a})=>{var s;return x((s=a.original)==null?void 0:s.date)||""}},{accessorKey:"invoice_number",header:"Invoice Number",cell:({row:a})=>e.jsx(w,{to:`/billing/purchases/view/${a.original.id}`,className:"text-blue-600 hover:underline",children:a.original.invoice_number})},{accessorKey:"contact.name",header:"Supplier Name"},{accessorKey:"contact.phone",header:"Supplier Phone"},{accessorKey:"warehouse.name",header:"Warehouse"},{accessorKey:"delivery_date",header:"Delivery Date",cell:({row:a})=>{var s;return x(((s=a.original)==null?void 0:s.delivery_date)||"")}},{accessorKey:"due_date",header:"Due Date",cell:({row:a})=>{var s;return x(((s=a.original)==null?void 0:s.due_date)||"")}},{accessorKey:"total",header:"Total"},{accessorKey:"total_due",header:"Total Due"},{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"Actions"}),enableSorting:!1,cell:({row:a})=>e.jsx(R,{rowData:a.original})}],M=()=>{const a=m(),[s,i]=j.useState({pageIndex:0,pageSize:10}),{data:n,isLoading:t}=T(`per_page=${s.pageSize}&page=${s.pageIndex+1}`),c=(n==null?void 0:n.data)||[],r=n==null?void 0:n.meta;return t?e.jsx(k,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(I,{title:"Purchase List",description:"Manage your sub accounts for you business"}),e.jsxs(l,{onClick:()=>a("/billing/purchases/add"),size:"sm",children:[e.jsx(K,{className:"mr-2 h-4 w-4"})," Add Purchase"]})]}),e.jsx(A,{}),n&&e.jsx("div",{children:e.jsx(L,{columns:_,data:c,paginationInfo:r,pagination:r&&s,setPagination:r&&i})})]})})})};export{M as default};
