import{ar as S,a as s,K as w,aO as b,aP as y,aQ as _,aR as p,aS as k,aT as g,R as T,ci as P,b as N,aj as R,ak as E,al as L,am as C,an as I,B as u,cj as D,ck as $,cl as z,cm as F,r as v,aW as G,aX as A,aY as H,aZ as W,a_ as q,Y as B}from"./index-a206b070.js";const J=S.injectEndpoints({endpoints:a=>({getLeaveSummary:a.query({query:r=>`leave-reports/summary?${r}`,providesTags:["leave-summary"]})}),overrideExisting:!1}),{useGetLeaveSummaryQuery:M}=J,O=({tableData:a,leaveTypeSummary:r})=>s.jsxs(w,{children:[" ",s.jsxs(b,{className:"",children:[s.jsx(y,{children:s.jsxs(_,{children:[s.jsx(p,{children:"Employee Id"}),s.jsx(p,{children:"Employee Name"}),r==null?void 0:r.map(e=>s.jsxs(p,{children:[e.name," Taken"]},e==null?void 0:e.id)),s.jsx(p,{children:"Total Leave Taken"})]})}),s.jsx(k,{className:"",children:a&&a.map(e=>{var i,n,c,t,d;return s.jsxs(_,{className:"",children:[s.jsx(g,{className:"",children:e==null?void 0:e.employee_unique_id}),s.jsxs(g,{className:"",children:[e==null?void 0:e.first_name," ",e==null?void 0:e.last_name]}),(i=e==null?void 0:e.leave_types)==null?void 0:i.map(l=>{var x,o,m,h;return s.jsx(T.Fragment,{children:s.jsxs(g,{className:"",children:[(x=l==null?void 0:l.used)==null?void 0:x.total_days," ",((o=l==null?void 0:l.used)==null?void 0:o.total_days)>1?"days":"day",((m=l==null?void 0:l.used)==null?void 0:m.total_hours)>0?` (${(h=l==null?void 0:l.used)==null?void 0:h.total_hours} hours)`:""]})},l==null?void 0:l.id)}),s.jsxs(g,{className:"",children:[(n=e==null?void 0:e.leave_taken)==null?void 0:n.total_days," ",((c=e==null?void 0:e.leave_taken)==null?void 0:c.total_days)>1?"days":"day",((t=e==null?void 0:e.leave_taken)==null?void 0:t.total_hours)>0?` (${(d=e==null?void 0:e.leave_taken)==null?void 0:d.total_hours} hours)`:""]})]},e.id)})}),s.jsx(P,{})]})]});function Q({meta:a,onPageChange:r=()=>{},onPageSizeChange:e=()=>{},dataCount:i,className:n}){return console.log(a),s.jsxs("div",{className:N("flex items-center justify-between px-2",n),children:[s.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:["Showing ",i," of ",a.total," items"]}),s.jsxs("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),s.jsxs(R,{value:a.per_page.toString(),onValueChange:c=>{e(Number(c)),r(1)},children:[s.jsx(E,{className:"h-8 w-[70px]",children:s.jsx(L,{placeholder:a.per_page})}),s.jsx(C,{side:"top",children:[10,20,30,40,50].map(c=>s.jsx(I,{value:`${c}`,children:c},c))})]})]}),s.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",a.current_page," of ",a.total]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(u,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>r(1),disabled:a.current_page===1,children:[s.jsx("span",{className:"sr-only",children:"Go to first page"}),s.jsx(D,{className:"h-4 w-4"})]}),s.jsxs(u,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>r(a.current_page-1),disabled:a.current_page===1,children:[s.jsx("span",{className:"sr-only",children:"Go to previous page"}),s.jsx($,{className:"h-4 w-4"})]}),s.jsxs(u,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>r(a.current_page+1),disabled:a.current_page===a.last_page,children:[s.jsx("span",{className:"sr-only",children:"Go to next page"}),s.jsx(z,{className:"h-4 w-4"})]}),s.jsxs(u,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>r(a.last_page),disabled:a.current_page===a.last_page,children:[s.jsx("span",{className:"sr-only",children:"Go to last page"}),s.jsx(F,{className:"h-4 w-4"})]})]})]})]})}const V=({children:a,fileName:r,className:e=""})=>{const i=v.useRef(null),n=async()=>{if(!i.current)return;const c=i.current.querySelectorAll(".hide-in-pdf");c.forEach(f=>f.style.display="none");const t=new W("p","mm","a4"),d=await q(i.current,{scale:2,useCORS:!0}),l=d.toDataURL("image/jpeg",1),x=t.internal.pageSize.getWidth(),o=t.internal.pageSize.getHeight();let h=d.height*(x/d.width),j=0;for(t.addImage(l,"JPEG",0,j,x,Math.min(o,h)),h-=o;h>0;)j=j-o,t.addPage(),t.addImage(l,"JPEG",0,j,x,Math.min(o,h)),h-=o;t.save(`${r||"file"}-${Date.now()}.pdf`),c.forEach(f=>f.style.display="")};return s.jsxs("div",{className:N("flex-1 w-full mx-auto"),children:[s.jsxs("div",{className:"flex space-x-2 items-center justify-end print:hidden px-4 pt-4",children:[s.jsx(G,{trigger:()=>s.jsxs(u,{size:"input",variant:"outline",className:"h-8 lg:flex",children:["Print ",s.jsx(A,{className:"ml-1",size:16,strokeWidth:1.2})]}),content:()=>i.current}),s.jsxs(u,{variant:"outline",size:"input",className:"h-8 lg:flex",onClick:n,children:["PDF ",s.jsx(H,{className:"ml-1",size:16,strokeWidth:1.2})]})]}),s.jsx("div",{className:N("p-4",e),ref:i,children:a})]})},K=()=>{const[a,r]=v.useState(1),[e,i]=v.useState(10),{data:n,isLoading:c}=M(`per_page=${e}&page=${a}`),t=(n==null?void 0:n.data)||[],d=n==null?void 0:n.leaves_type_summary,l=n==null?void 0:n.meta;return c?s.jsx(B,{}):s.jsx(s.Fragment,{children:s.jsxs(w,{children:[s.jsxs(V,{className:"space-y-4",fileName:"leave-summary-report",children:[s.jsx("div",{className:"flex-1 space-y-4 my-4",children:s.jsxs("div",{className:"text-center  ",children:[s.jsx("h2",{children:"Akaar IT"}),s.jsx("h3",{className:"text-xl",children:"Leave Summary"})]})}),t&&d?s.jsx(O,{tableData:t,leaveTypeSummary:d}):null]}),l&&s.jsx(Q,{className:"print:hidden hide-in-pdf px-4 pb-4",meta:l,dataCount:t.length,onPageChange:r,onPageSizeChange:i})]})})};export{K as default};
