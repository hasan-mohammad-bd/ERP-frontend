import{a as e,r as t,x as G,aJ as H,ar as A,as as w,at as K,M as g,av as D,au as J,aw as V,ax as B,ay as I,an as C,az as Q,z as q,B as W,am as X,F as Y,aK as Z,E as ee,G as ae,H as se,a6 as te,a7 as le,a8 as z,aL as ne,a9 as oe,aa as ie,aA as ce,aI as de,aM as re,aN as me,aO as pe,aP as ue,N as he,aQ as x,aR as ye,R as xe,aS as ge,aB as Se,t as fe,aT as je,aU as ve,aD as Ce}from"./index-464ea72c.js";import{C as be}from"./circle-dollar-sign-9d342cc6.js";import{u as Ne,e as Ee}from"./attendance-policy-mapping-9d8c24aa.js";import{u as _e}from"./index-56a8c4b3.js";import{u as Fe}from"./index-b87488bb.js";import{u as Pe}from"./index-6307c270.js";import{u as Ae}from"./index-5b3efa97.js";const we=()=>e.jsx("div",{});function Ke({data:a}){const[l,r]=t.useState(!1),[o,u]=t.useState(!1),s=G(),[i,{isLoading:n}]=H(),c=async d=>{try{await i(d),C.success("Job Candidate deleted successfully"),r(!1)}catch(h){console.log(h)}};return e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(A,{children:e.jsxs(w,{children:[e.jsx(K,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>s(`/hrm/salary-setup/${a.id}`),className:"hover:bg-secondary",children:e.jsx(be,{className:"h-4 w-4 text-foreground"})})}),e.jsx(D,{children:e.jsx("p",{children:"Update Employee Salary Setup"})})]})}),e.jsx(A,{children:e.jsxs(w,{children:[e.jsx(K,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>s(`/hrm/employees-list/edit/${a.id}`),children:e.jsx(J,{className:"h-4 w-4 text-foreground"})})}),e.jsx(D,{children:e.jsx("p",{children:"Update Employee"})})]})}),e.jsx(A,{children:e.jsxs(w,{children:[e.jsx(K,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>{r(!0)},children:e.jsx(V,{className:"h-4 w-4 text-foreground"})})}),e.jsx(D,{children:e.jsx("p",{children:"Delete employee"})})]})}),e.jsx(B,{title:"Are you sure?",description:"This action cannot be undone.",name:a.first_name,isOpen:l,onClose:()=>r(!1),onConfirm:()=>c(a.id),loading:n}),o&&e.jsx(I,{title:"Job Details",isOpen:o,toggleModal:()=>u(!1),className:"w-[90%] max-w-6xl",children:e.jsx(we,{})})]})}const De=[{id:"select",header:({table:a})=>e.jsx(Q,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:l=>a.toggleAllPageRowsSelected(!!l),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:a})=>e.jsx(Q,{checked:a.getIsSelected(),onCheckedChange:l=>a.toggleSelected(!!l),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"first_name",header:"First name"},{accessorKey:"last_name",header:"Last name"},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{accessorKey:"",accessorFn:({department:a})=>a==null?void 0:a.name,header:"Department"},{accessorKey:"location",accessorFn:({location:a})=>a==null?void 0:a.name,header:"Location"},{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"Actions"}),enableSorting:!1,cell:({row:a})=>e.jsx(Ke,{data:a.original})}];function Ge({payload:a,modelClose:l}){const[r,o]=t.useState(!1),[u,{isLoading:s}]=Ne(),[i,n]=t.useState(null),c=G(),{data:d,isLoading:h}=_e("per_page=1000&page=1"),S=(d==null?void 0:d.data)||[],y=q({resolver:W(Ee),defaultValues:{employee_ids:a==null?void 0:a.map(m=>m.id),effective_date:new Date().toISOString().split("T")[0]}}),b=m=>{m&&(n(m),y.setValue("effective_date",`${z(m,"yyyy-MM-dd")}`),o(!1))};async function j(m){const v={...m,employee_ids:(a==null?void 0:a.map(f=>f.id))||[]};try{await u(v),C.success("Employee Attendance Policy created successfully"),l&&l(),c("/hrm/attendance-policy-mapping")}catch(f){console.log(f)}}return e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"h-[535px]",children:e.jsx(X,{})}):e.jsx("div",{className:"flex gap-x-4",children:e.jsx("div",{className:" w-full ",children:e.jsx(Y,{...y,children:e.jsxs("form",{onSubmit:y.handleSubmit(j),className:"",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx("div",{className:"w-full",children:e.jsx(Z,{loading:h,data:S,displayField:"name",valueField:"id",form:y,name:"attendance_policy_id",title:"Attendance Policy",className:"w-[460px]"})}),e.jsx(ee,{control:y.control,name:"effective_date",render:()=>e.jsxs(ae,{children:[e.jsx(se,{children:"Effective Date"}),e.jsxs(te,{open:r,onOpenChange:o,children:[e.jsx(le,{asChild:!0,className:"",children:e.jsxs(g,{variant:"outline",className:`w-full justify-start text-left font-normal ${!i&&"text-muted-foreground"}`,children:[i?z(i,"PP"):"Pick a date",e.jsx(ne,{className:"ml-auto h-4 w-4 opacity-50"})]})}),e.jsx(oe,{className:"w-auto p-0",align:"start",children:e.jsx(ie,{mode:"single",selected:i??void 0,onSelect:b,initialFocus:!0})})]})]})})]}),e.jsx("div",{children:e.jsx(g,{variant:"default",type:"submit",className:"w-full mt-4",children:"Save"})})]})})})})})}function Me({setFilterParams:a}){const{data:l}=ce("per_page=1000"),{data:r}=de("per_page=1000"),{data:o}=re("per_page=1000"),{data:u}=me("per_page=1000"),{data:s}=pe(),{data:i}=ue("per_page=1000"),{data:n}=Fe(),{data:c}=Pe("per_page=1000"),{data:d}=Ae("per_page=1000"),[h,S]=t.useState(void 0),[y,b]=t.useState(void 0),[j,m]=t.useState(void 0),[v,f]=t.useState(void 0),[N,M]=t.useState(void 0),[E,k]=t.useState(void 0),[_,L]=t.useState(void 0),[F,R]=t.useState(void 0),[P,O]=t.useState(void 0),$=()=>{const p=new URLSearchParams;h&&p.append("department_id",h.id.toString()),y&&p.append("designation_id",y.id.toString()),j&&p.append("location_id",j.id.toString()),v&&p.append("section_id",v.id.toString()),N&&p.append("employment_status_id",N.id.toString()),E&&p.append("schedule_id",E.id.toString()),_&&p.append("gender_id",_.id.toString()),F&&p.append("employee_class_id",F.id.toString()),P&&p.append("employee_grade_id",P.id.toString());const T=p.toString();console.log(T),a(T),C.success("Filters applied successfully")},U=()=>{S(void 0),b(void 0),m(void 0),f(void 0),M(void 0),k(void 0),L(void 0),R(void 0),O(void 0),a(""),C.success("Filters reset successfully")};return e.jsxs(he,{className:"w-full p-5",children:[e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx(x,{items:(l==null?void 0:l.data)||[],labelKey:"name",valueKey:"id",value:h,placeholder:"Select Department",onSelect:S}),e.jsx(x,{items:(r==null?void 0:r.data)||[],labelKey:"name",valueKey:"id",value:y,placeholder:"Select Designation",onSelect:b}),e.jsx(x,{items:(u==null?void 0:u.data)||[],labelKey:"name",valueKey:"id",value:j,placeholder:"Select Branch",onSelect:m}),e.jsx(x,{items:(o==null?void 0:o.data)||[],labelKey:"name",valueKey:"id",value:v,placeholder:"Select Section",onSelect:f}),e.jsx(x,{items:(s==null?void 0:s.data)||[],labelKey:"name",valueKey:"id",value:N,placeholder:"Select Status",onSelect:M}),e.jsx(x,{items:(i==null?void 0:i.data)||[],labelKey:"name",valueKey:"id",value:E,placeholder:"Select Shift",onSelect:k}),e.jsx(x,{items:(n==null?void 0:n.data)||[],labelKey:"name",valueKey:"id",value:_,placeholder:"Select Gender",onSelect:L}),e.jsx(x,{items:(c==null?void 0:c.data)||[],labelKey:"name",valueKey:"id",value:F,placeholder:"Select Class",onSelect:R}),e.jsx(x,{items:(d==null?void 0:d.data)||[],labelKey:"name",valueKey:"id",value:P,placeholder:"Select Grade",onSelect:O})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-4",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:U,children:"Reset Filters"}),e.jsxs(g,{variant:"default",size:"sm",onClick:$,children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"Apply Filters"]})]})]})}const ke=[{label:"Enable Roster",value:"enable-roster"},{label:"Attendance Policy Mapping",value:"attendance-policy-mapping"},{label:"Delete Selected",value:"delete-selected"}],Ie=()=>{const a=G(),[l,r]=t.useState(""),[o,u]=xe.useState({pageIndex:0,pageSize:10}),{data:s,isLoading:i}=ge(`per_page=${o.pageSize}&page=${o.pageIndex+1}${l}{}`),[n,c]=t.useState({action:"",payload:[]}),d=(s==null?void 0:s.data)||[],h=s==null?void 0:s.meta,S=()=>{console.log("Handle Employee Roster Change"),console.log(n),C.success("Employee roster updated successfully"),c({action:"",payload:[]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Se,{title:"Employees",description:"Manage employees for you business"}),e.jsxs(g,{onClick:()=>a("/hrm/employees-list/add"),size:"sm",children:[e.jsx(fe,{className:"mr-2 h-4 w-4"})," Add Employee"]})]}),e.jsx(je,{}),e.jsx(Me,{setFilterParams:r}),i&&e.jsx(ve,{}),d&&!i&&e.jsx("div",{children:e.jsx(Ce,{columns:De,data:d,bulkActions:ke,onBulkSelectChange:c,paginationInfo:h,pagination:o,setPagination:u})})]})}),n.action==="enable-roster"&&e.jsx(B,{title:"Enable Employee Roster?",description:"This action can be changed later",alertMessage:"Are you sure you want to update employee roster status?",type:"default",isOpen:n.action==="enable-roster",onClose:()=>c({action:"",payload:[]}),onConfirm:S}),n.action==="attendance-policy-mapping"&&e.jsx(I,{title:"Attendance Policy Mapping",toggleModal:()=>c({action:"",payload:[]}),isOpen:n.action==="attendance-policy-mapping",className:"!h-fit",children:e.jsx(Ge,{payload:n.payload,modelClose:()=>c({action:"",payload:[]})})})]})};export{Ie as default};
