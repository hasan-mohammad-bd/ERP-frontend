import{y as P,bU as k,r as p,b4 as L,dc as S,dd as T,B as I,a as e,ar as M,ag as Q,ah as U,ai as x,G as A,aj as B,U as G,ak as O,al as H,am as J,H as r,J as o,K as l,M as i,I as c,N as t,a6 as R,a7 as V,Q as h,a8 as u,aR as $,a9 as z,aa as K,aQ as W,bp as q,D as X,de as Y,as as Z,at as D}from"./index-f3d77c82.js";function ae(){const g=P(),y=k(),m=Number(y.id),[C,b]=p.useState({date:!1}),{data:j,isLoading:v}=L("page=1&per_page=1000"),{data:a,isLoading:f}=S(m,{skip:!m}),N=(j==null?void 0:j.data)||[],[_,{isLoading:w}]=T(),E=s=>{b(d=>({...d,[s]:!d[s]}))},n=I({resolver:X(Y),defaultValues:{}});p.useEffect(()=>{a!=null&&a.data&&n.reset({name:(a==null?void 0:a.data.name)||"",email:(a==null?void 0:a.data.email)||"",phone:(a==null?void 0:a.data.phone)||"",work_phone:(a==null?void 0:a.data.work_phone)||"",opening_balance:String(a==null?void 0:a.data.opening_balance)||"",note:(a==null?void 0:a.data.note)||"",date:(a==null?void 0:a.data.date)||"",company_name:(a==null?void 0:a.data.company_name)||"",company_id:(a==null?void 0:a.data.company_id)||"",location_id:String(a==null?void 0:a.data.location.id)||""})},[a==null?void 0:a.data,n]);async function F(s){console.log(s);try{await _({updatedCustomer:{...s,location_id:Number(s.location_id),opening_balance:Number(s.opening_balance)},customerId:m}).unwrap(),Z.success("Customer updated successfully")}catch(d){D(d),console.log(d)}}return f?e.jsx(M,{}):e.jsxs(Q,{defaultValue:"customer",className:"max-w-[1000px] mx-auto mt-10",children:[e.jsxs(U,{className:"grid w-full grid-cols-4",children:[e.jsx(x,{value:"customer",children:"Customer Details"}),e.jsx(x,{value:"address",children:"Address"}),e.jsx(x,{value:"contact_person",children:"Contact Person"}),e.jsx(x,{value:"attachment",children:"Attachment"})]}),e.jsx(A,{...n,children:e.jsx("form",{onSubmit:n.handleSubmit(F),className:"space-y-3 max-w-[1200px] mx-auto",children:e.jsx(B,{value:"customer",children:e.jsxs(G,{children:[e.jsx(O,{children:e.jsx(H,{children:"Edit Customer "})}),e.jsxs(J,{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsx(r,{control:n.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Full Name"}),e.jsx(i,{children:e.jsx(c,{className:"",placeholder:"Enter full name",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:n.control,name:"company_name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Company Name"}),e.jsx(i,{children:e.jsx(c,{className:"",placeholder:"Enter company name",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:n.control,name:"company_id",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Customer Id"}),e.jsx(i,{children:e.jsx(c,{type:"text",placeholder:"Enter customer Id",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:n.control,name:"work_phone",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Work Phone"}),e.jsx(i,{children:e.jsx(c,{type:"text",placeholder:"Enter work phone",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:n.control,name:"phone",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Phone number"}),e.jsx(i,{children:e.jsx(c,{type:"text",placeholder:"Enter phone number",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:n.control,name:"email",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Email Address"}),e.jsx(i,{children:e.jsx(c,{type:"email",placeholder:"Enter email address",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:n.control,name:"opening_balance",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Opening Balance"}),e.jsx(i,{children:e.jsx(c,{placeholder:"Enter opening balance",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:n.control,name:"date",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Date"}),e.jsxs(R,{open:C.date,onOpenChange:()=>E("date"),children:[e.jsx(V,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:`w-full justify-start text-left font-normal ${!s.value&&"text-muted-foreground"}`,children:[s.value?u(s.value,"PP"):"Pick a date",e.jsx($,{className:"ml-auto h-4 w-4 opacity-50"})]})}),e.jsx(z,{className:"w-auto p-0 z-[200]",align:"start",children:e.jsx(K,{mode:"single",selected:s.value?new Date(s.value):void 0,onSelect:d=>{s.onChange(d?u(d,"yyyy-MM-dd"):"")},initialFocus:!0})})]}),e.jsx(t,{})]})}),e.jsx(W,{loading:v,data:N,displayField:"name",valueField:"id",form:n,name:"location_id",placeholder:"Location",title:"Location",className:"w-[300px]"}),e.jsx(r,{control:n.control,name:"note",render:({field:s})=>e.jsxs(o,{className:"col-span-2",children:[e.jsx(l,{children:"Note"}),e.jsx(i,{children:e.jsx(q,{placeholder:"Enter note",...s})}),e.jsx(t,{})]})})]}),e.jsxs("div",{className:"flex flex-row-reverse items-center pt-5",children:[e.jsx(h,{variant:"default",type:"submit",className:"w-fit ml-2",children:w?"Saving":"Save"}),e.jsx(h,{variant:"primary",type:"button",className:"w-fit",onClick:()=>g("/billing/customers"),children:"Cancel"})]})]})]})})})})]})}export{ae as default};
