import{bq as M,a as e,Z as b,be as E,bf as $,bg as D,bh as n,bi as K,bj as l,cw as R,c1 as k,c4 as B,c5 as G,c3 as Q,r as d,bn as H,bX as g,Y as P,c6 as q,ae as C,ay as T,v as I,ax as W,aM as Y,b0 as J,bp as O,cx as U}from"./index-b7a2f218.js";const X=M.injectEndpoints({endpoints:s=>({getAttendanceSummary:s.query({query:a=>`attendance-summary-report?${a}`,providesTags:["attendance-summary-report"]})}),overrideExisting:!1}),{useGetAttendanceSummaryQuery:Z}=X,V=({tableData:s})=>e.jsxs(b,{children:[" ",e.jsxs(E,{className:"",children:[e.jsx($,{children:e.jsxs(D,{children:[e.jsx(n,{children:"Employee Id"}),e.jsx(n,{children:"Employee Name"}),e.jsx(n,{children:"Late"}),e.jsx(n,{children:"Extreme Late"}),e.jsx(n,{children:"On Time"}),e.jsx(n,{children:"Working Days"}),e.jsx(n,{children:"Present Days"}),e.jsx(n,{children:"Absent Days"}),e.jsx(n,{children:"Total Days"}),e.jsx(n,{children:"Total Hours"})]})}),e.jsx(K,{className:"",children:s&&s.map(a=>{var c,i;return e.jsxs(D,{className:"",children:[e.jsx(l,{className:"",children:a==null?void 0:a.employee_id}),e.jsx(l,{className:"",children:a==null?void 0:a.employee_name}),e.jsx(l,{children:a.late}),e.jsx(l,{children:a==null?void 0:a.extreme_late}),e.jsx(l,{children:a==null?void 0:a.on_time}),e.jsx(l,{children:a==null?void 0:a.working_days}),e.jsx(l,{children:a==null?void 0:a.present_days}),e.jsx(l,{children:a==null?void 0:a.absent_days}),e.jsx(l,{children:(c=a==null?void 0:a.leaves)==null?void 0:c.total_days}),e.jsx(l,{children:(i=a==null?void 0:a.leaves)==null?void 0:i.total_hours})]},a==null?void 0:a.employee_id)})}),e.jsx(R,{})]})]});function ee({setFilterParams:s}){const[a,{data:c}]=k(),[i,{data:p}]=B(),[m,{data:u}]=G(),[r,{data:y}]=Q(),[o,j]=d.useState(void 0),[x,N]=d.useState(void 0),[f,_]=d.useState(void 0),[v,w]=d.useState(void 0),[S,A]=d.useState(new Date),F=()=>{const t=S?C(S,"yyyy-MM"):"",h=new URLSearchParams;o&&h.append("department_id",o.id.toString()),x&&h.append("location_id",x.id.toString()),f&&h.append("schedule_id",f.id.toString()),v&&h.append("section_id",v.id.toString()),S&&h.append("date",t.toString());const z=h.toString();s(z),T.success("Filters applied successfully")},L=()=>{j(void 0),N(void 0),_(void 0),w(void 0),A(new Date),s(""),T.success("Filters reset successfully")};return e.jsx(b,{className:"w-full p-5",children:e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx("div",{className:"space-y-2 flex flex-col py-0",children:e.jsx(H,{selected:S,onChange:t=>{A(t??new Date)},dateFormat:"MM/yyyy",showMonthYearPicker:!0,placeholderText:"Select date",className:"border rounded p-[6px] w-full bg-none bg_remove"})}),e.jsx(g,{items:(c==null?void 0:c.data)||[],labelKey:"name",valueKey:"id",value:o,placeholder:"Select Department",onSelect:j,onChangeSearch:t=>a(`text=${t}`)}),e.jsx(g,{items:(p==null?void 0:p.data)||[],labelKey:"name",valueKey:"id",value:x,placeholder:"Select Location",onSelect:N,onChangeSearch:t=>i(`text=${t}`)}),e.jsx(g,{items:(u==null?void 0:u.data)||[],labelKey:"name",valueKey:"id",value:f,placeholder:"Select Shift",onSelect:_,onChangeSearch:t=>m(`text=${t}`)}),e.jsx(g,{items:(y==null?void 0:y.data)||[],labelKey:"name",valueKey:"id",value:v,placeholder:"Select Section",onSelect:w,onChangeSearch:t=>r(`text=${t}`)}),e.jsx(P,{variant:"outline",size:"sm",onClick:L,children:"Reset Filters"}),e.jsxs(P,{variant:"default",size:"sm",onClick:F,children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Apply Filters"]})]})})}const se=()=>{var x;const{user:s}=I(),[a,c]=d.useState(1),[i,p]=d.useState(10),[m,u]=d.useState(`date=${C(new Date,"yyyy-MM")}`),{data:r,isLoading:y}=Z(`per_page=${i}&page=${a}&${m}`),o=(r==null?void 0:r.data)||[],j=r==null?void 0:r.meta;return y?e.jsx(W,{}):e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(Y,{title:"Attendance Summary Report",description:"Manage Attendance Summary Report for you business"})}),e.jsx(J,{}),e.jsx("div",{className:"",children:e.jsx(ee,{setFilterParams:u})}),e.jsx("div",{children:e.jsxs(b,{children:[e.jsxs(O,{className:"space-y-4",fileName:"attendance-summary-report",children:[e.jsx("div",{className:"flex-1 space-y-4 my-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{children:(x=s==null?void 0:s.organization)==null?void 0:x.name}),e.jsx("h3",{className:"text-xl",children:"Attendance Summary"})]})}),o?e.jsx(V,{tableData:o}):null]}),j&&e.jsx(U,{className:"px-4 pb-4",meta:j,dataCount:o.length,onPageChange:c,onPageSizeChange:p})]})})]})};export{se as default};
