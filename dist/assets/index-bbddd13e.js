import{a as r,a8 as K,aY as L,U as u,b7 as f,bb as g,b9 as n,bc as e,V as k,aT as G,B as p,D as z,G as B,aQ as Q,b as A,bf as C,Q as R,r as U,bg as W,aG as Y,aU as $,ar as I,bh as V}from"./index-431b013c.js";const q=({employeeSalaryPayslipData:s})=>{var b,t,x,d,h,l,i,j,m,N,_,w,E,v,F,T,a,M;return s?r.jsxs("div",{className:"p-7",children:[r.jsxs("div",{className:"mt-8 mb-5",children:[r.jsxs("p",{className:"mt-4 font-bold text-center",children:["Salary Pay Slip For"," ",K(L(s==null?void 0:s.salary_month),"MMM-yy")]}),r.jsxs("div",{className:"text-sm w-full text-center",children:[r.jsxs("div",{children:["Address:"," ",(t=(b=s==null?void 0:s.organization)==null?void 0:b.address)==null?void 0:t.join(", ")]})," ",r.jsxs("div",{className:"mb-2",children:["Phone: ",(d=(x=s==null?void 0:s.organization)==null?void 0:x.phone)==null?void 0:d.join(", ")]})]})]}),r.jsx("div",{children:r.jsxs(u,{className:"mx-auto",children:[" ",r.jsx(f,{className:"border border-black",children:r.jsxs(g,{children:[r.jsxs(n,{className:"border border-black",children:[r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Name of the Employee"}),r.jsx(e,{className:"border border-black py-1 px-2",colSpan:3,children:`${(h=s==null?void 0:s.employee)==null?void 0:h.first_name} 
                  ${(l=s==null?void 0:s.employee)==null?void 0:l.last_name}`})]}),r.jsxs(n,{className:"border border-black",children:[r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Employee ID"}),r.jsx(e,{className:"border border-black py-1 px-2",children:s==null?void 0:s.employee_id}),r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Designation"}),r.jsx(e,{className:"border border-black py-1 px-2",children:(j=(i=s==null?void 0:s.employee)==null?void 0:i.designation)==null?void 0:j.name})]}),r.jsxs(n,{className:"border border-black",children:[r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Department"}),r.jsx(e,{className:"border border-black py-1 px-2",children:(N=(m=s==null?void 0:s.employee)==null?void 0:m.department)==null?void 0:N.name}),r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Bank Account Number"}),r.jsx(e,{className:"border border-black py-1 px-2",children:(_=s==null?void 0:s.employee)==null?void 0:_.account_number})]}),r.jsxs(n,{className:"border border-black",children:[r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Gross Wage"}),r.jsxs(e,{className:"border border-black py-1 px-2",children:["TK."," ",(w=Number(s==null?void 0:s.allowance_total))==null?void 0:w.toFixed(2)]}),r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Total Working Days"}),r.jsx(e,{className:"border border-black py-1 px-2",children:s==null?void 0:s.working_days})]}),r.jsxs(n,{className:"border border-black font-bold",children:[r.jsx(e,{colSpan:2,className:"text-center border border-black py-1 px-2",children:"Earnings"}),r.jsx(e,{colSpan:2,className:"text-center border border-black py-1 px-2",children:"Deductions"})]}),r.jsxs(n,{children:[r.jsx(e,{colSpan:2,className:"align-top border border-black !p-0",children:r.jsx(f,{children:r.jsx(g,{children:(v=(E=s==null?void 0:s.salary_details)==null?void 0:E.filter(c=>{var o;return((o=c==null?void 0:c.salary_category)==null?void 0:o.type)==="Allowance"}))==null?void 0:v.map((c,o)=>r.jsxs(n,{className:"group",children:[r.jsx(e,{className:"border border-black border-r-0 border-l-0 group-first:border-t-0 py-1 px-2 w-[70%]",children:c.salary_category.name}),r.jsxs(e,{className:"border border-black border-r-0 group-first:border-t-0 py-1 px-2 w-[30%]",children:["TK. ",c.amount]})]},o))})})}),r.jsx(e,{colSpan:2,className:"align-top border border-black border-b-0 !p-0",children:r.jsx(f,{children:r.jsx(g,{children:(T=(F=s==null?void 0:s.salary_details)==null?void 0:F.filter(c=>{var o;return((o=c==null?void 0:c.salary_category)==null?void 0:o.type)==="Deduction"}))==null?void 0:T.map((c,o)=>r.jsxs(n,{className:"group",children:[r.jsx(e,{className:"border border-black border-r-0 border-l-0 group-first:border-t-0 group-last:border-b-0 py-1 px-2 w-[70%]",children:c.salary_category.name}),r.jsxs(e,{className:"border border-black border-r-0 group-first:border-t-0 group-last:border-b-0 py-1 px-2 w-[30%]",children:["TK. ",c.amount]})]},o))})})})]}),r.jsxs(n,{className:"border border-black font-bold",children:[r.jsx(e,{className:"border border-black py-1 px-2",children:"Total Earnings"}),r.jsxs(e,{className:"border border-black py-1 px-2",children:["TK."," ",(a=Number(s==null?void 0:s.allowance_total))==null?void 0:a.toFixed(2)]}),r.jsx(e,{className:"border border-black py-1 px-2",children:"Total Deductions"}),r.jsxs(e,{className:"border border-black py-1 px-2",children:["TK."," ",(M=Number(s==null?void 0:s.deduction_total))==null?void 0:M.toFixed(2)]})]}),r.jsxs(n,{className:"border border-black font-bold",children:[r.jsx(e,{colSpan:3,className:"border border-black text-right py-1 px-2",children:"Net Salary"}),r.jsxs(e,{className:"border border-black py-1 px-2",children:["TK. ",s==null?void 0:s.net_salary]})]})]})})]})})]}):null},H=k.object({employee_id:k.string().nonempty("Employee is required"),estimateSalaryDate:k.date()});function O({setFilterParams:s}){var l;const{data:b,isLoading:t}=G("page=1&per_page=1000"),x=(b==null?void 0:b.data)||[],d=p({resolver:z(H)}),h=async i=>{const j=K(String(i.estimateSalaryDate),"yyyy-MM");if(!j||!i.employee_id)return;const m=new URLSearchParams;m.append("employee_id",i.employee_id),m.append("salary_month",j);const N=m.toString();s(N)};return r.jsx(B,{...d,children:r.jsx("form",{onSubmit:d.handleSubmit(h),className:"w-full rounded-lg space-y-6",children:r.jsx(u,{className:"p-5",children:r.jsxs("div",{className:"grid gap-5 md:grid-cols-5",children:[r.jsx("div",{className:"w-full",children:r.jsx(Q,{loading:t,data:x,displayField:"first_name",valueField:"id",form:d,name:"employee_id",title:"Employee",className:"w-[295px]"})}),r.jsxs("div",{className:"space-y-2 flex flex-col",children:[r.jsx("label",{className:A("text-sm font-medium mt-1",d.formState.errors.estimateSalaryDate&&"text-red-500"),children:"Month and Year"}),r.jsx(C,{selected:d.watch("estimateSalaryDate"),onChange:i=>{d.setValue("estimateSalaryDate",i),d.trigger("estimateSalaryDate")},dateFormat:"MM/yyyy",showMonthYearPicker:!0,placeholderText:"Select month and year",className:"border rounded p-2 w-full bg-none bg_remove"}),d.formState.errors.estimateSalaryDate&&r.jsx("p",{className:"text-red-500 text-sm",children:(l=d.formState.errors.estimateSalaryDate)==null?void 0:l.message})]}),r.jsx("div",{className:"pt-7",children:r.jsx(R,{variant:"default",type:"submit",className:"w-fit px-14 mt-[3px] capitalize",children:"apply"})})]})})})})}const X=()=>{const[s,b]=U.useState(""),{data:t,isLoading:x,isError:d}=W(`${s}`,{skip:!s}),h=t==null?void 0:t.data;return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx(Y,{title:"Employee Salary Payslip",description:"Manage job apply for you business"})}),r.jsx($,{}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx(O,{setFilterParams:b}),x&&r.jsx(I,{}),h&&!x&&!d&&r.jsx(u,{className:"flex-1 space-y-4 max-w-[950px] w-full mx-auto p-3 pb-4",children:r.jsx(V,{className:"space-y-4",fileName:"employee-salary-payslip",children:r.jsx(q,{employeeSalaryPayslipData:h})})}),d&&!x&&r.jsx(u,{className:"flex-1 space-y-4 max-w-[950px] w-full mx-auto p-3 py-6 grid place-items-center",children:r.jsx("h2",{className:"text-center",children:"No Data Found"})})]})]})};export{X as default};
