import{a as r,a8 as M,N as u,a_ as f,b2 as g,b0 as o,b3 as e,Q as k,aN as K,z as L,B as z,F as A,aK as B,b as $,M as q,b6 as C,r as G,aB as Q,aO as R,am as W,b7 as I}from"./index-4357fa82.js";import{p as O}from"./parseISO-16353421.js";import{D as Y}from"./index-7fc9784d.js";const H=({employeeSalaryPayslipData:s})=>{var n,t,x,d,m,h,i,j,l,N,a,_,w,E,p,v,F,T;return s?r.jsxs("div",{className:"p-7",children:[r.jsxs("div",{className:"mt-8 mb-5",children:[r.jsxs("p",{className:"mt-4 font-bold text-center",children:["Salary Pay Slip For"," ",M(O(s==null?void 0:s.salary_month),"MMM-yy")]}),r.jsxs("div",{className:"text-sm w-full text-center",children:[r.jsxs("div",{children:["Address:"," ",(t=(n=s==null?void 0:s.organization)==null?void 0:n.address)==null?void 0:t.join(", ")]})," ",r.jsxs("div",{className:"mb-2",children:["Phone: ",(d=(x=s==null?void 0:s.organization)==null?void 0:x.phone)==null?void 0:d.join(", ")]})]})]}),r.jsx("div",{children:r.jsxs(u,{className:"mx-auto",children:[" ",r.jsx(f,{className:"border border-black",children:r.jsxs(g,{children:[r.jsxs(o,{className:"border border-black",children:[r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Name of the Employee"}),r.jsx(e,{className:"border border-black py-1 px-2",colSpan:3,children:`${(m=s==null?void 0:s.employee)==null?void 0:m.first_name} 
                  ${(h=s==null?void 0:s.employee)==null?void 0:h.last_name}`})]}),r.jsxs(o,{className:"border border-black",children:[r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Employee ID"}),r.jsx(e,{className:"border border-black py-1 px-2",children:s==null?void 0:s.employee_id}),r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Designation"}),r.jsx(e,{className:"border border-black py-1 px-2",children:(j=(i=s==null?void 0:s.employee)==null?void 0:i.designation)==null?void 0:j.name})]}),r.jsxs(o,{className:"border border-black",children:[r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Department"}),r.jsx(e,{className:"border border-black py-1 px-2",children:(N=(l=s==null?void 0:s.employee)==null?void 0:l.department)==null?void 0:N.name}),r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Bank Account Number"}),r.jsx(e,{className:"border border-black py-1 px-2",children:(a=s==null?void 0:s.employee)==null?void 0:a.account_number})]}),r.jsxs(o,{className:"border border-black",children:[r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Gross Wage"}),r.jsxs(e,{className:"border border-black py-1 px-2",children:["TK."," ",(_=Number(s==null?void 0:s.allowance_total))==null?void 0:_.toFixed(2)]}),r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Total Working Days"}),r.jsx(e,{className:"border border-black py-1 px-2",children:s==null?void 0:s.working_days})]}),r.jsxs(o,{className:"border border-black font-bold",children:[r.jsx(e,{colSpan:2,className:"text-center border border-black py-1 px-2",children:"Earnings"}),r.jsx(e,{colSpan:2,className:"text-center border border-black py-1 px-2",children:"Deductions"})]}),r.jsxs(o,{children:[r.jsx(e,{colSpan:2,className:"align-top border border-black !p-0",children:r.jsx(f,{children:r.jsx(g,{children:(E=(w=s==null?void 0:s.salary_details)==null?void 0:w.filter(c=>{var b;return((b=c==null?void 0:c.salary_category)==null?void 0:b.type)==="Allowance"}))==null?void 0:E.map((c,b)=>r.jsxs(o,{className:"group",children:[r.jsx(e,{className:"border border-black border-r-0 border-l-0 group-first:border-t-0 py-1 px-2 w-[70%]",children:c.salary_category.name}),r.jsxs(e,{className:"border border-black border-r-0 group-first:border-t-0 py-1 px-2 w-[30%]",children:["TK. ",c.amount]})]},b))})})}),r.jsx(e,{colSpan:2,className:"align-top border border-black border-b-0 !p-0",children:r.jsx(f,{children:r.jsx(g,{children:(v=(p=s==null?void 0:s.salary_details)==null?void 0:p.filter(c=>{var b;return((b=c==null?void 0:c.salary_category)==null?void 0:b.type)==="Deduction"}))==null?void 0:v.map((c,b)=>r.jsxs(o,{className:"group",children:[r.jsx(e,{className:"border border-black border-r-0 border-l-0 group-first:border-t-0 group-last:border-b-0 py-1 px-2 w-[70%]",children:c.salary_category.name}),r.jsxs(e,{className:"border border-black border-r-0 group-first:border-t-0 group-last:border-b-0 py-1 px-2 w-[30%]",children:["TK. ",c.amount]})]},b))})})})]}),r.jsxs(o,{className:"border border-black font-bold",children:[r.jsx(e,{className:"border border-black py-1 px-2",children:"Total Earnings"}),r.jsxs(e,{className:"border border-black py-1 px-2",children:["TK."," ",(F=Number(s==null?void 0:s.allowance_total))==null?void 0:F.toFixed(2)]}),r.jsx(e,{className:"border border-black py-1 px-2",children:"Total Deductions"}),r.jsxs(e,{className:"border border-black py-1 px-2",children:["TK."," ",(T=Number(s==null?void 0:s.deduction_total))==null?void 0:T.toFixed(2)]})]}),r.jsxs(o,{className:"border border-black font-bold",children:[r.jsx(e,{colSpan:3,className:"border border-black text-right py-1 px-2",children:"Net Salary"}),r.jsxs(e,{className:"border border-black py-1 px-2",children:["TK. ",s==null?void 0:s.net_salary]})]})]})})]})})]}):null},U=k.object({employee_id:k.string().nonempty("Employee is required"),estimateSalaryDate:k.date()});function V({setFilterParams:s}){var h;const{data:n,isLoading:t}=K("page=1&per_page=1000"),x=(n==null?void 0:n.data)||[],d=L({resolver:z(U)}),m=async i=>{const j=M(String(i.estimateSalaryDate),"yyyy-MM");if(!j||!i.employee_id)return;const l=new URLSearchParams;l.append("employee_id",i.employee_id),l.append("salary_month",j);const N=l.toString();s(N)};return r.jsx(A,{...d,children:r.jsx("form",{onSubmit:d.handleSubmit(m),className:"w-full rounded-lg space-y-6",children:r.jsxs(u,{className:"p-5",children:[r.jsxs("div",{className:"grid gap-6 md:grid-cols-5",children:[r.jsx("div",{className:"w-full",children:r.jsx(B,{loading:t,data:x,displayField:"first_name",valueField:"id",form:d,name:"employee_id",title:"Employee",className:"w-[295px]"})}),r.jsxs("div",{className:"space-y-2 flex flex-col",children:[r.jsx("label",{className:$("text-sm font-medium mt-1",d.formState.errors.estimateSalaryDate&&"text-red-500"),children:"Month and Year"}),r.jsx(Y,{selected:d.watch("estimateSalaryDate"),onChange:i=>{d.setValue("estimateSalaryDate",i),d.trigger("estimateSalaryDate")},dateFormat:"MM/yyyy",showMonthYearPicker:!0,placeholderText:"Select month and year",className:"border rounded p-2 w-full bg-none bg_remove"}),d.formState.errors.estimateSalaryDate&&r.jsx("p",{className:"text-red-500 text-sm",children:(h=d.formState.errors.estimateSalaryDate)==null?void 0:h.message})]})]}),r.jsx("div",{className:"pt-7 col-span-3 flex justify-end mt-auto",children:r.jsx(q,{variant:"default",type:"submit",className:"w-fit px-14 mt-[3px] capitalize",children:"apply"})})]})})})}const J=C.injectEndpoints({endpoints:s=>({getEmployeesEstimateSalaryPayslip:s.query({query:n=>`pay-slip-report?${n}`,providesTags:["employee-salary-payslip"]})}),overrideExisting:!1}),{useGetEmployeesEstimateSalaryPayslipQuery:X}=J,P=()=>{const[s,n]=G.useState(""),{data:t,isLoading:x,isError:d}=X(`${s}`,{skip:!s}),m=t==null?void 0:t.data;return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx(Q,{title:"Employee Salary Payslip",description:"Manage job apply for you business"})}),r.jsx(R,{}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx(V,{setFilterParams:n}),x&&r.jsx(W,{}),m&&!x&&!d&&r.jsx(u,{className:"flex-1 space-y-4 max-w-[950px] w-full mx-auto p-3 pb-4",children:r.jsx(I,{className:"space-y-4",fileName:"employee-salary-payslip",children:r.jsx(H,{employeeSalaryPayslipData:m})})}),d&&!x&&r.jsx(u,{className:"flex-1 space-y-4 max-w-[950px] w-full mx-auto p-3 py-6 grid place-items-center",children:r.jsx("h2",{className:"text-center",children:"No Data Found"})})]})]})};export{P as default};
