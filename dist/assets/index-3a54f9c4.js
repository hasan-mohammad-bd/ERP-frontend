import{a as r,a5 as K,aQ as L,M as u,a_ as f,b2 as g,b0 as n,b3 as e,N as k,aL as p,y as z,z as A,F as B,aI as C,b as G,b6 as I,K as Q,r as R,b7 as W,ay as $,aM as Y,aj as q,b8 as H}from"./index-e61d4543.js";const O=({employeeSalaryPayslipData:s})=>{var b,t,x,d,h,m,i,j,l,N,_,w,E,v,F,a,T,M;return s?r.jsxs("div",{className:"p-7",children:[r.jsxs("div",{className:"mt-8 mb-5",children:[r.jsxs("p",{className:"mt-4 font-bold text-center",children:["Salary Pay Slip For"," ",K(L(s==null?void 0:s.salary_month),"MMM-yy")]}),r.jsxs("div",{className:"text-sm w-full text-center",children:[r.jsxs("div",{children:["Address:"," ",(t=(b=s==null?void 0:s.organization)==null?void 0:b.address)==null?void 0:t.join(", ")]})," ",r.jsxs("div",{className:"mb-2",children:["Phone: ",(d=(x=s==null?void 0:s.organization)==null?void 0:x.phone)==null?void 0:d.join(", ")]})]})]}),r.jsx("div",{children:r.jsxs(u,{className:"mx-auto",children:[" ",r.jsx(f,{className:"border border-black",children:r.jsxs(g,{children:[r.jsxs(n,{className:"border border-black",children:[r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Name of the Employee"}),r.jsx(e,{className:"border border-black py-1 px-2",colSpan:3,children:`${(h=s==null?void 0:s.employee)==null?void 0:h.first_name} 
                  ${(m=s==null?void 0:s.employee)==null?void 0:m.last_name}`})]}),r.jsxs(n,{className:"border border-black",children:[r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Employee ID"}),r.jsx(e,{className:"border border-black py-1 px-2",children:s==null?void 0:s.employee_id}),r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Designation"}),r.jsx(e,{className:"border border-black py-1 px-2",children:(j=(i=s==null?void 0:s.employee)==null?void 0:i.designation)==null?void 0:j.name})]}),r.jsxs(n,{className:"border border-black",children:[r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Department"}),r.jsx(e,{className:"border border-black py-1 px-2",children:(N=(l=s==null?void 0:s.employee)==null?void 0:l.department)==null?void 0:N.name}),r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Bank Account Number"}),r.jsx(e,{className:"border border-black py-1 px-2",children:(_=s==null?void 0:s.employee)==null?void 0:_.account_number})]}),r.jsxs(n,{className:"border border-black",children:[r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Gross Wage"}),r.jsxs(e,{className:"border border-black py-1 px-2",children:["TK."," ",(w=Number(s==null?void 0:s.allowance_total))==null?void 0:w.toFixed(2)]}),r.jsx(e,{className:"border border-black font-bold py-1 px-2",children:"Total Working Days"}),r.jsx(e,{className:"border border-black py-1 px-2",children:s==null?void 0:s.working_days})]}),r.jsxs(n,{className:"border border-black font-bold",children:[r.jsx(e,{colSpan:2,className:"text-center border border-black py-1 px-2",children:"Earnings"}),r.jsx(e,{colSpan:2,className:"text-center border border-black py-1 px-2",children:"Deductions"})]}),r.jsxs(n,{children:[r.jsx(e,{colSpan:2,className:"align-top border border-black !p-0",children:r.jsx(f,{children:r.jsx(g,{children:(v=(E=s==null?void 0:s.salary_details)==null?void 0:E.filter(c=>{var o;return((o=c==null?void 0:c.salary_category)==null?void 0:o.type)==="Allowance"}))==null?void 0:v.map((c,o)=>r.jsxs(n,{className:"group",children:[r.jsx(e,{className:"border border-black border-r-0 border-l-0 group-first:border-t-0 py-1 px-2 w-[70%]",children:c.salary_category.name}),r.jsxs(e,{className:"border border-black border-r-0 group-first:border-t-0 py-1 px-2 w-[30%]",children:["TK. ",c.amount]})]},o))})})}),r.jsx(e,{colSpan:2,className:"align-top border border-black border-b-0 !p-0",children:r.jsx(f,{children:r.jsx(g,{children:(a=(F=s==null?void 0:s.salary_details)==null?void 0:F.filter(c=>{var o;return((o=c==null?void 0:c.salary_category)==null?void 0:o.type)==="Deduction"}))==null?void 0:a.map((c,o)=>r.jsxs(n,{className:"group",children:[r.jsx(e,{className:"border border-black border-r-0 border-l-0 group-first:border-t-0 group-last:border-b-0 py-1 px-2 w-[70%]",children:c.salary_category.name}),r.jsxs(e,{className:"border border-black border-r-0 group-first:border-t-0 group-last:border-b-0 py-1 px-2 w-[30%]",children:["TK. ",c.amount]})]},o))})})})]}),r.jsxs(n,{className:"border border-black font-bold",children:[r.jsx(e,{className:"border border-black py-1 px-2",children:"Total Earnings"}),r.jsxs(e,{className:"border border-black py-1 px-2",children:["TK."," ",(T=Number(s==null?void 0:s.allowance_total))==null?void 0:T.toFixed(2)]}),r.jsx(e,{className:"border border-black py-1 px-2",children:"Total Deductions"}),r.jsxs(e,{className:"border border-black py-1 px-2",children:["TK."," ",(M=Number(s==null?void 0:s.deduction_total))==null?void 0:M.toFixed(2)]})]}),r.jsxs(n,{className:"border border-black font-bold",children:[r.jsx(e,{colSpan:3,className:"border border-black text-right py-1 px-2",children:"Net Salary"}),r.jsxs(e,{className:"border border-black py-1 px-2",children:["TK. ",s==null?void 0:s.net_salary]})]})]})})]})})]}):null},U=k.object({employee_id:k.string().nonempty("Employee is required"),estimateSalaryDate:k.date()});function V({setFilterParams:s}){var m;const{data:b,isLoading:t}=p("page=1&per_page=1000"),x=(b==null?void 0:b.data)||[],d=z({resolver:A(U)}),h=async i=>{const j=K(String(i.estimateSalaryDate),"yyyy-MM");if(!j||!i.employee_id)return;const l=new URLSearchParams;l.append("employee_id",i.employee_id),l.append("salary_month",j);const N=l.toString();s(N)};return r.jsx(B,{...d,children:r.jsx("form",{onSubmit:d.handleSubmit(h),className:"w-full rounded-lg space-y-6",children:r.jsxs(u,{className:"p-5",children:[r.jsxs("div",{className:"grid gap-6 md:grid-cols-5",children:[r.jsx("div",{className:"w-full",children:r.jsx(C,{loading:t,data:x,displayField:"first_name",valueField:"id",form:d,name:"employee_id",title:"Employee",className:"w-[295px]"})}),r.jsxs("div",{className:"space-y-2 flex flex-col",children:[r.jsx("label",{className:G("text-sm font-medium mt-1",d.formState.errors.estimateSalaryDate&&"text-red-500"),children:"Month and Year"}),r.jsx(I,{selected:d.watch("estimateSalaryDate"),onChange:i=>{d.setValue("estimateSalaryDate",i),d.trigger("estimateSalaryDate")},dateFormat:"MM/yyyy",showMonthYearPicker:!0,placeholderText:"Select month and year",className:"border rounded p-2 w-full bg-none bg_remove"}),d.formState.errors.estimateSalaryDate&&r.jsx("p",{className:"text-red-500 text-sm",children:(m=d.formState.errors.estimateSalaryDate)==null?void 0:m.message})]})]}),r.jsx("div",{className:"pt-7 col-span-3 flex justify-end mt-auto",children:r.jsx(Q,{variant:"default",type:"submit",className:"w-fit px-14 mt-[3px] capitalize",children:"apply"})})]})})})}const X=()=>{const[s,b]=R.useState(""),{data:t,isLoading:x,isError:d}=W(`${s}`,{skip:!s}),h=t==null?void 0:t.data;return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx($,{title:"Employee Salary Payslip",description:"Manage job apply for you business"})}),r.jsx(Y,{}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx(V,{setFilterParams:b}),x&&r.jsx(q,{}),h&&!x&&!d&&r.jsx(u,{className:"flex-1 space-y-4 max-w-[950px] w-full mx-auto p-3 pb-4",children:r.jsx(H,{className:"space-y-4",fileName:"employee-salary-payslip",children:r.jsx(O,{employeeSalaryPayslipData:h})})}),d&&!x&&r.jsx(u,{className:"flex-1 space-y-4 max-w-[950px] w-full mx-auto p-3 py-6 grid place-items-center",children:r.jsx("h2",{className:"text-center",children:"No Data Found"})})]})]})};export{X as default};
