import{o as R,r as N,j as e,A as B,R as ae}from"./index-CwtkdAoF.js";import{u as U,t as Q,L as w,F as Z,a as m,b as p,c as j,S as _,d as g,f as k,g as M,h as S,i as h,e as y,M as V,H as le}from"./modal-DpBJVnX2.js";import{c as E,B as A}from"./index-Cxev_hGH.js";import{$ as ce}from"./index-D-gdl2yy.js";import{T as te,a as de,b as ie,c as oe}from"./tabs-CmGxdHYF.js";import{T as Y,a as P,b as O,c as G,d as v,e as x,F as J,f as he,g as xe,h as I,i as ue}from"./tooltip-BMgwtow4.js";import{a as je,b as me,d as z}from"./card-Ba-Nv17p.js";import{I as q}from"./input-BHxcSLDT.js";import{L as pe,a as ge}from"./sub-account-sZsHL0qL.js";import{S as ye}from"./switch-JQuS2kbZ.js";import{P as $}from"./sheet-CUiZ_cAH.js";/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=E("FilePenLine",[["path",{d:"m18 5-3-3H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"h0fsxq"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M18.4 9.6a2 2 0 1 1 3 3L17 17l-4 1 1-4Z",key:"dyo8mm"}]]);/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=E("FilePlus2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]);/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=E("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=E("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=E("ScanEye",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M5 12s2.5-5 7-5 7 5 7 5-2.5 5-7 5-7-5-7-5",key:"nhuolu"}]]),Ne=R.injectEndpoints({endpoints:n=>({getLedgerGroups:n.query({query:()=>"ledger-groups?tree=1",providesTags:["ledger-groups-tree"]}),getLedgerGroupsArray:n.query({query:()=>"ledger-groups",providesTags:["ledger-groups-array"]}),createLedgerGroup:n.mutation({query:s=>({url:"ledger-groups",method:"POST",body:s}),invalidatesTags:["ledger-groups","ledger-groups-tree","ledger-groups-array"]}),removeLedgerGroup:n.mutation({query:s=>({url:`ledger-groups/${s}`,method:"DELETE"}),invalidatesTags:["ledger-groups"]}),updateLedgerGroup:n.mutation({query:({ledgerGroupId:s,updatedLedgerGroup:a})=>({url:`ledger-groups/${s}`,method:"PUT",body:a}),invalidatesTags:["ledger-groups"]})}),overrideExisting:!1}),{useGetLedgerGroupsQuery:Le,useGetLedgerGroupsArrayQuery:W,useCreateLedgerGroupMutation:Te,useRemoveLedgerGroupMutation:He,useUpdateLedgerGroupMutation:ze}=Ne;function X({modalClose:n,rowData:s}){const[a,{isLoading:t}]=Te(),{data:d,isLoading:i}=W(),[C,o]=N.useState("Assets"),L=(d==null?void 0:d.data)||[],u=L==null?void 0:L.filter(c=>(c==null?void 0:c.type)===C),b=U({resolver:Q(pe),defaultValues:{parent_id:(s==null?void 0:s.id)||0}});async function T(c){try{await a(c),B.success("Add ledger group successfully"),n()}catch(r){console.log(r)}}return e.jsx(e.Fragment,{children:t?e.jsx("div",{className:"h-56",children:e.jsx(w,{})}):e.jsx(Z,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(T),className:"w-full space-y-3",children:[(s==null?void 0:s.id)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Parent:"})," ",s==null?void 0:s.name]}),!(s!=null&&s.id)&&e.jsxs(e.Fragment,{children:[e.jsx(m,{name:"",render:()=>e.jsxs(p,{children:[e.jsx(j,{children:"Account Type"}),e.jsxs(_,{value:C,onValueChange:c=>{o(c)},children:[e.jsx(g,{children:e.jsx(k,{children:e.jsx(M,{placeholder:"Select Account Type"})})}),e.jsxs(S,{children:[e.jsx(h,{value:"Assets",children:"Assets"}),e.jsx(h,{value:"Liabilities",children:"Liabilities"}),e.jsx(h,{value:"Income",children:"Incomes"}),e.jsx(h,{value:"Expenses",children:"Expenses"})]})]}),e.jsx(y,{})]})}),(u==null?void 0:u.length)>0?e.jsx(m,{control:b.control,name:"parent_id",render:({field:c})=>e.jsxs(p,{children:[e.jsx(j,{children:"Parent"}),e.jsxs(_,{onValueChange:c.onChange,children:[e.jsx(g,{children:e.jsx(k,{children:e.jsx(M,{placeholder:"Select Parent"})})}),e.jsx(S,{children:i?e.jsx(w,{}):u==null?void 0:u.map(r=>e.jsx(h,{value:String(r.id),children:r.name},r.id))})]}),e.jsx(y,{})]})}):null]}),e.jsx(m,{control:b.control,name:"code",render:({field:c})=>e.jsxs(p,{children:[e.jsx(j,{children:"Code"}),e.jsx(g,{children:e.jsx(q,{placeholder:"Enter code",...c,value:c.value||""})}),e.jsx(y,{})]})}),e.jsx(m,{control:b.control,name:"name",render:({field:c})=>e.jsxs(p,{children:[e.jsx(j,{children:"Name"}),e.jsx(g,{children:e.jsx(q,{placeholder:"Enter financial year name",...c})}),e.jsx(y,{})]})}),e.jsx("div",{children:e.jsx(A,{variant:"default",type:"submit",className:"w-full mt-4",children:"Add Group"})})]})})})}const _e=R.injectEndpoints({endpoints:n=>({getLedgerAccounts:n.query({query:()=>"ledger-accounts",providesTags:["ledger-accounts"]}),createLedgerAccount:n.mutation({query:s=>({url:"ledger-accounts",method:"POST",body:s}),invalidatesTags:["ledger-accounts","ledger-groups-tree","ledger-groups-array"]}),removeLedgerAccount:n.mutation({query:s=>({url:`ledger-accounts/${s}`,method:"DELETE"}),invalidatesTags:["ledger-accounts","ledger-groups-tree","ledger-groups-array"]}),updateLedgerAccount:n.mutation({query:({ledgerAccountId:s,updatedLedgerAccount:a})=>({url:`ledger-accounts/${s}`,method:"PUT",body:a}),invalidatesTags:["ledger-accounts","ledger-groups"]})}),overrideExisting:!1}),{useGetLedgerAccountsQuery:$e,useCreateLedgerAccountMutation:ke,useRemoveLedgerAccountMutation:Re,useUpdateLedgerAccountMutation:Be}=_e;function D({modalClose:n,rowData:s,coaType:a}){const[t,{isLoading:d}]=ke(),[i,C]=ae.useState(0),{data:o,isLoading:L}=W(),[u,b]=N.useState("Assets"),T=(o==null?void 0:o.data)||[],c=T==null?void 0:T.filter(l=>(l==null?void 0:l.type)===u),r=U({resolver:Q(ge),defaultValues:{parent_id:(s==null?void 0:s.id)||0,is_fixed_asset:0,is_stock:0,is_cash_nature:0,is_bank_nature:0,is_sub_type:0}});async function re(l){try{await t(l),B.success("Add ledger account successfully"),n()}catch(f){console.log(f)}}const F=l=>{a==="Assets"||u==="Assets"?(r.setValue("is_fixed_asset",l==="is_fixed_asset"?1:0),r.setValue("is_stock",l==="is_stock"?1:0),r.setValue("is_cash_nature",l==="is_cash_nature"?1:0),r.setValue("is_bank_nature",l==="is_bank_nature"?1:0)):(r.setValue("is_fixed_asset",0),r.setValue("is_stock",0),r.setValue("is_cash_nature",0),r.setValue("is_bank_nature",0))};return e.jsx(e.Fragment,{children:d?e.jsx("div",{className:"h-56",children:e.jsx(w,{})}):e.jsx(Z,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(re),className:"w-full space-y-3",children:[(s==null?void 0:s.id)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Parent:"})," ",s==null?void 0:s.name]}),!(s!=null&&s.id)&&e.jsxs(e.Fragment,{children:[e.jsx(m,{name:"",render:()=>e.jsxs(p,{children:[e.jsx(j,{children:"Account Type"}),e.jsxs(_,{value:u,onValueChange:l=>{b(l)},children:[e.jsx(g,{children:e.jsx(k,{children:e.jsx(M,{placeholder:"Select Account Type"})})}),e.jsxs(S,{children:[e.jsx(h,{value:"Assets",children:"Assets"}),e.jsx(h,{value:"Liabilities",children:"Liabilities"}),e.jsx(h,{value:"Income",children:"Incomes"}),e.jsx(h,{value:"Expenses",children:"Expenses"})]})]}),e.jsx(y,{})]})}),(c==null?void 0:c.length)>0?e.jsx(m,{control:r.control,name:"parent_id",render:({field:l})=>e.jsxs(p,{children:[e.jsx(j,{children:"Parent"}),e.jsxs(_,{onValueChange:l.onChange,children:[e.jsx(g,{children:e.jsx(k,{children:e.jsx(M,{placeholder:"Select Parent"})})}),e.jsx(S,{children:L?e.jsx(w,{}):c==null?void 0:c.map(f=>e.jsx(h,{value:String(f.id),children:f.name},f.id))})]}),e.jsx(y,{})]})}):null]}),e.jsx(m,{control:r.control,name:"code",render:({field:l})=>e.jsxs(p,{children:[e.jsx(j,{children:"Code"}),e.jsx(g,{children:e.jsx(q,{placeholder:"Enter code",...l,value:l.value||""})}),e.jsx(y,{})]})}),e.jsx(m,{control:r.control,name:"name",render:({field:l})=>e.jsxs(p,{children:[e.jsx(j,{children:"Name"}),e.jsx(g,{children:e.jsx(q,{placeholder:"Enter ledger account name",...l})}),e.jsx(y,{})]})}),a==="Assets"||u==="Assets"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Nature"}),e.jsxs("div",{className:"flex items-center text-sm space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"nature",checked:!!r.watch("is_fixed_asset"),onChange:()=>F("is_fixed_asset")}),e.jsx("span",{children:"Fixed Asset"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"nature",checked:!!r.watch("is_stock"),onChange:()=>F("is_stock")}),e.jsx("span",{children:"Stock"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"nature",checked:!!r.watch("is_cash_nature"),onChange:()=>F("is_cash_nature")}),e.jsx("span",{children:"Cash Nature"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"nature",checked:!!r.watch("is_bank_nature"),onChange:()=>F("is_bank_nature")}),e.jsx("span",{children:"Bank Nature"})]})]})]}):null,e.jsx(m,{control:r.control,name:"is_sub_type",render:({field:l})=>e.jsxs(p,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(j,{children:"Is Sub Type"})}),e.jsx(g,{children:e.jsx(ye,{checked:l.value===1,onCheckedChange:f=>{l.onChange(f?1:0),C(f?1:0)}})})]})}),i===1&&e.jsx(m,{control:r.control,name:"sub_type",render:({field:l})=>e.jsxs(p,{children:[e.jsx(j,{children:"Sub Type"}),e.jsxs(_,{onValueChange:l.onChange,defaultValue:"None",children:[e.jsx(g,{children:e.jsx(k,{children:e.jsx(M,{placeholder:""})})}),e.jsxs(S,{children:[e.jsx(h,{value:"None",children:"None"}),e.jsx(h,{value:"Employee",children:"Employee"}),e.jsx(h,{value:"Customer",children:"Customer"}),e.jsx(h,{value:"Supplier",children:"Supplier"}),e.jsx(h,{value:"Agent",children:"Agent"})]})]}),e.jsx(y,{})]})}),e.jsx("div",{children:e.jsx(A,{variant:"default",type:"submit",className:"w-full mt-4",children:"Add Account"})})]})})})}function ee({rowData:n,coaType:s}){const[a,t]=N.useState(!1),[d,i]=N.useState(!1);return e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsxs(Y,{children:[e.jsxs(P,{children:[e.jsx(O,{asChild:!0,children:e.jsx(A,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>t(!0),children:e.jsx(be,{className:"text-foreground"})})}),e.jsx(G,{children:e.jsx("p",{children:"Add child Group"})})]}),e.jsxs(P,{children:[e.jsx(O,{asChild:!0,children:e.jsx(A,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>i(!0),children:e.jsx(Ae,{className:"text-foreground"})})}),e.jsx(G,{children:e.jsx("p",{children:"Add Account "})})]})]}),a&&e.jsx(V,{title:"Add Group",isOpen:a,toggleModal:()=>t(!1),children:e.jsx(X,{rowData:n,modalClose:()=>t(!1)})}),d&&e.jsx(V,{title:"Add Account",isOpen:d,toggleModal:()=>i(!1),children:e.jsx(D,{rowData:n,coaType:s,modalClose:()=>i(!1)})})]})}function se({rowData:n}){return console.log(n),e.jsx("div",{className:"flex justify-end items-center space-x-2",children:e.jsxs(Y,{children:[e.jsxs(P,{children:[e.jsx(O,{asChild:!0,children:e.jsx(A,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>alert("Not Implemented"),children:e.jsx(Ce,{className:"text-foreground"})})}),e.jsx(G,{children:e.jsx("p",{children:"View Account"})})]}),e.jsxs(P,{children:[e.jsx(O,{asChild:!0,children:e.jsx(A,{variant:"ghost",size:"icon",className:"hover:bg-secondary",onClick:()=>alert("Not Implemented"),children:e.jsx(fe,{className:"text-foreground"})})}),e.jsx(G,{children:e.jsx("p",{children:"Edit Account"})})]})]})})}const ne=({group:n,coaType:s})=>n.childs_group.map(a=>e.jsxs(e.Fragment,{children:[e.jsxs(v,{children:[e.jsx(x,{children:a.code}),e.jsxs(x,{className:"inline-flex items-center gap-2",children:["    ",e.jsx(K,{}),a.name]}),e.jsx(x,{className:"text-right",children:e.jsx(ee,{rowData:a,coaType:s})})]},a.id),a.childs_group.length>0&&e.jsx(ne,{group:a,coaType:s}),a.ledgers.map(t=>e.jsxs(v,{children:[e.jsx(x,{children:t.code}),e.jsxs(x,{className:"inline-flex items-center gap-2",children:["    ",e.jsx(J,{}),t.name]}),e.jsx(x,{className:"text-right",children:e.jsx(se,{rowData:t})})]},t.id))]})),Me=({data:n,title:s,description:a,coaType:t})=>{const d=n.find(i=>i.name===t);return d?e.jsx("div",{children:e.jsxs(je,{children:[e.jsx(me,{children:s}),e.jsx(z,{children:a}),e.jsx(z,{children:e.jsxs(he,{className:"mt-6",children:[e.jsx(xe,{children:e.jsxs(v,{children:[e.jsx(I,{className:"w-[100px]",children:"Code"}),e.jsx(I,{children:"Name"}),e.jsx(I,{className:"text-right",children:"Actions"})]})}),e.jsxs(ue,{children:[e.jsxs(v,{children:[e.jsx(x,{children:d.code}),e.jsxs(x,{className:"inline-flex items-center gap-2",children:[e.jsx(K,{}),d.name]}),e.jsx(x,{className:"text-right",children:e.jsx(ee,{rowData:d,coaType:t})})]}),e.jsx(ne,{group:d,coaType:t}),d.ledgers.map(i=>e.jsxs(v,{children:[e.jsx(x,{children:i.code}),e.jsxs(x,{className:"inline-flex items-center gap-2",children:[e.jsx(J,{}),i.name]}),e.jsx(x,{className:"text-right",children:e.jsx(se,{rowData:i})})]},i.id))]})]})})]})}):null},H=[{type:"Assets",title:"Assets",description:"Manage assets for your business"},{type:"Liabilities",title:"Liabilities",description:"Manage liabilities for your business"},{type:"Income",title:"Incomes",description:"Manage incomes for your business"},{type:"Expenses",title:"Expenses",description:"Manage expenses for your business"}],Ue=()=>{const{data:n,isLoading:s}=Le(),[a,t]=N.useState(!1),[d,i]=N.useState(!1),C=(n==null?void 0:n.data)||[];return s?e.jsx(w,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between md:p-8",children:[e.jsx(le,{title:"Chart Of Account",description:"Manage Chart of account for you business"}),e.jsxs("div",{className:"flex space-x-2 items-center",children:[e.jsxs(A,{onClick:()=>t(!0),size:"sm",children:[e.jsx($,{className:"mr-2 h-4 w-4"})," Add Group"]}),e.jsxs(A,{onClick:()=>i(!0),size:"sm",children:[e.jsx($,{className:"mr-2 h-4 w-4"})," Add Account"]})]})]}),e.jsx(ce,{}),e.jsxs(te,{defaultValue:H[0].type,className:"w-full mt-3 px-3",children:[e.jsx(de,{className:"w-fit mx-4",children:H.map(o=>e.jsx(ie,{value:o.type,children:o.title},o.type))}),H.map(o=>e.jsx(oe,{value:o.type,children:e.jsx(Me,{title:o.title,coaType:o.type,description:o.description,data:C})},o.type))]}),a&&e.jsx(V,{title:"Add Group",isOpen:a,toggleModal:()=>t(!1),children:e.jsx(X,{modalClose:()=>t(!1)})}),d&&e.jsx(V,{title:"Add Account",isOpen:d,toggleModal:()=>i(!1),children:e.jsx(D,{modalClose:()=>i(!1)})})]})};export{Ue as default};
