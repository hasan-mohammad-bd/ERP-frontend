import{ax as le,ay as ue,x as de,az as fe,r as m,a as t,ai as R,aj as E,ak as O,al as $,am as N,I as me,b,y as xe,z as he,B as q,aA as je,A as J,D as pe,aB as C,aC as ge,o as z,aD as ye,aE as we,V as be,X as Se,Y as Ne,Z as H,_,$ as I,a0 as P,a1 as D,ap as Me,ad as ve,F as Te,G as Ae,H as K,aF as U,K as W,M as G,N as Q,Q as F}from"./index-7fe2e31f.js";import{S as ke}from"./separator-ebbc589a.js";import{C as Ve}from"./clock-e29ebb10.js";import{M as He}from"./multiSelectSearch-f77f10d3.js";import{c as _e}from"./index-a8f82bf9.js";function Ie(e,r){const{years:s=0,months:i=0,weeks:n=0,days:f=0,hours:u=0,minutes:o=0,seconds:l=0}=r,c=le(e),d=i||s?ue(c,i+s*12):c,a=f||n?de(d,f+n*7):d,h=o+u*60,g=(l+h*60)*1e3;return fe(e,a.getTime()+g)}function Pe(e){return/^(0[0-9]|1[0-9]|2[0-3])$/.test(e)}function De(e){return/^(0[1-9]|1[0-2])$/.test(e)}function Re(e){return/^[0-5][0-9]$/.test(e)}function v(e,{max:r,min:s=0,loop:i=!1}){let n=parseInt(e,10);return isNaN(n)?"00":(i?(n>r&&(n=s),n<s&&(n=r)):(n>r&&(n=r),n<s&&(n=s)),n.toString().padStart(2,"0"))}function ee(e){return Pe(e)?e:v(e,{max:23})}function te(e){return De(e)?e:v(e,{min:1,max:12})}function M(e){return Re(e)?e:v(e,{max:59})}function B(e,{min:r,max:s,step:i}){let n=parseInt(e,10);return isNaN(n)?"00":(n+=i,v(String(n),{min:r,max:s,loop:!0}))}function Ee(e,r){return B(e,{min:0,max:23,step:r})}function Oe(e,r){return B(e,{min:1,max:12,step:r})}function X(e,r){return B(e,{min:0,max:59,step:r})}function $e(e,r){const s=M(r);return e.setMinutes(parseInt(s,10)),e}function Ce(e,r){const s=M(r);return e.setSeconds(parseInt(s,10)),e}function Ye(e,r){const s=ee(r);return e.setHours(parseInt(s,10)),e}function Be(e,r,s){const i=parseInt(te(r),10),n=Ke(i,s);return e.setHours(n),e}function Y(e,r,s,i){switch(s){case"minutes":return $e(e,r);case"seconds":return Ce(e,r);case"hours":return Ye(e,r);case"12hours":return i?Be(e,r,i):e;default:return e}}function Le(e,r){if(!e)return"00";switch(r){case"minutes":return M(String(e.getMinutes()));case"seconds":return M(String(e.getSeconds()));case"hours":return ee(String(e.getHours()));case"12hours":const s=re(e.getHours());return te(String(s));default:return"00"}}function ze(e,r,s){switch(s){case"minutes":return X(e,r);case"seconds":return X(e,r);case"hours":return Ee(e,r);case"12hours":return Oe(e,r);default:return"00"}}function Ke(e,r){return r==="PM"?e<=11?e+12:e:r==="AM"&&e===12?0:e}function re(e){return e===0||e===12?"12":e>=22?`${e-12}`:e%12>9?`${e}`:`0${e%12}`}function Ue(e){return Array.from({length:12},(r,s)=>({value:s,label:J(new Date(2021,s),"MMMM",{locale:e})}))}function We(e,r=50){const s=new Date;return Array.from({length:r*2+1},(i,n)=>({value:s.getFullYear()-r+n,label:(s.getFullYear()-r+n).toString()}))}function se({className:e,classNames:r,showOutsideDays:s=!0,yearRange:i=50,...n}){const f=m.useMemo(()=>Ue(n.locale||C),[]),u=m.useMemo(()=>We(n.locale||C,i),[]);return t.jsx(ge,{showOutsideDays:s,className:b("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0 justify-center",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:b(z({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:b(z({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:({...o})=>t.jsx(ye,{...o,className:"h-4 w-4"}),IconRight:({...o})=>t.jsx(we,{...o,className:"h-4 w-4"}),CaptionLabel:({displayMonth:o})=>t.jsxs("div",{className:"inline-flex gap-2",children:[t.jsxs(R,{defaultValue:o.getMonth().toString(),onValueChange:l=>{var d;const c=new Date(o);c.setMonth(parseInt(l,10)),(d=n.onMonthChange)==null||d.call(n,c)},children:[t.jsx(E,{className:"w-fit border-none p-0 focus:bg-accent focus:text-accent-foreground",children:t.jsx(O,{})}),t.jsx($,{children:f.map(l=>t.jsx(N,{value:l.value.toString(),children:l.label},l.value))})]}),t.jsxs(R,{defaultValue:o.getFullYear().toString(),onValueChange:l=>{var d;const c=new Date(o);c.setFullYear(parseInt(l,10)),(d=n.onMonthChange)==null||d.call(n,c)},children:[t.jsx(E,{className:"w-fit border-none p-0 focus:bg-accent focus:text-accent-foreground",children:t.jsx(O,{})}),t.jsx($,{children:u.map(l=>t.jsx(N,{value:l.value.toString(),children:l.label},l.value))})]})]})},...n})}se.displayName="Calendar";const ne=m.forwardRef(({period:e,setPeriod:r,date:s,onDateChange:i,onLeftFocus:n,onRightFocus:f},u)=>{const o=c=>{c.key==="ArrowRight"&&(f==null||f()),c.key==="ArrowLeft"&&(n==null||n())},l=c=>{if(r==null||r(c),s){const d=new Date(s),a=re(s.getHours());i==null||i(Y(d,a.toString(),"12hours",e==="AM"?"PM":"AM"))}};return t.jsx("div",{className:"flex h-10 items-center",children:t.jsxs(R,{defaultValue:e,onValueChange:c=>l(c),children:[t.jsx(E,{ref:u,className:"w-[65px] focus:bg-accent focus:text-accent-foreground",onKeyDown:o,children:t.jsx(O,{})}),t.jsxs($,{children:[t.jsx(N,{value:"AM",children:"AM"}),t.jsx(N,{value:"PM",children:"PM"})]})]})})});ne.displayName="TimePeriodSelect";const S=m.forwardRef(({className:e,type:r="tel",value:s,id:i,name:n,date:f=new Date(new Date().setHours(0,0,0,0)),onDateChange:u,onChange:o,onKeyDown:l,picker:c,period:d,onLeftFocus:a,onRightFocus:h,...p},g)=>{const[j,y]=m.useState(!1),[L,T]=m.useState("0");m.useEffect(()=>{if(j){const x=setTimeout(()=>{y(!1)},2e3);return()=>clearTimeout(x)}},[j]);const w=m.useMemo(()=>Le(f,c),[f,c]),ie=x=>c==="12hours"&&j&&w.slice(1,2)==="1"&&L==="0"?"0"+x:j?w.slice(1,2)+x:"0"+x,oe=x=>{if(x.key!=="Tab"){if(x.preventDefault(),x.key==="ArrowRight"&&(h==null||h()),x.key==="ArrowLeft"&&(a==null||a()),["ArrowUp","ArrowDown"].includes(x.key)){const A=x.key==="ArrowUp"?1:-1,k=ze(w,A,c);j&&y(!1);const V=f?new Date(f):new Date;u==null||u(Y(V,k,c,d))}if(x.key>="0"&&x.key<="9"){c==="12hours"&&T(x.key);const A=ie(x.key);j&&(h==null||h()),y(V=>!V);const k=f?new Date(f):new Date;u==null||u(Y(k,A,c,d))}}};return t.jsx(me,{ref:g,id:i||c,name:n||c,className:b("w-[48px] text-center font-mono text-base tabular-nums caret-transparent focus:bg-accent focus:text-accent-foreground [&::-webkit-inner-spin-button]:appearance-none",e),value:s||w,onChange:x=>{x.preventDefault(),o==null||o(x)},type:r,inputMode:"decimal",onKeyDown:x=>{l==null||l(x),oe(x)},...p})});S.displayName="TimePickerInput";const ae=m.forwardRef(({date:e,onChange:r,hourCycle:s=24,granularity:i="second"},n)=>{const f=m.useRef(null),u=m.useRef(null),o=m.useRef(null),l=m.useRef(null),[c,d]=m.useState(e&&e.getHours()>=12?"PM":"AM");return m.useImperativeHandle(n,()=>({minuteRef:f.current,hourRef:u.current,secondRef:o.current,periodRef:l.current}),[f,u,o]),t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("label",{htmlFor:"datetime-picker-hour-input",className:"cursor-pointer",children:t.jsx(Ve,{className:"mr-2 h-4 w-4"})}),t.jsx(S,{picker:s===24?"hours":"12hours",date:e,id:"datetime-picker-hour-input",onDateChange:r,ref:u,period:c,onRightFocus:()=>{var a;return(a=f.current)==null?void 0:a.focus()}}),(i==="minute"||i==="second")&&t.jsxs(t.Fragment,{children:[":",t.jsx(S,{picker:"minutes",date:e,onDateChange:r,ref:f,onLeftFocus:()=>{var a;return(a=u.current)==null?void 0:a.focus()},onRightFocus:()=>{var a;return(a=o.current)==null?void 0:a.focus()}})]}),i==="second"&&t.jsxs(t.Fragment,{children:[":",t.jsx(S,{picker:"seconds",date:e,onDateChange:r,ref:o,onLeftFocus:()=>{var a;return(a=f.current)==null?void 0:a.focus()},onRightFocus:()=>{var a;return(a=l.current)==null?void 0:a.focus()}})]}),s===12&&t.jsx("div",{className:"grid gap-1 text-center",children:t.jsx(ne,{period:c,setPeriod:d,date:e,onDateChange:a=>{r==null||r(a),a&&(a==null?void 0:a.getHours())>=12?d("PM"):d("AM")},ref:l,onLeftFocus:()=>{var a;return(a=o.current)==null?void 0:a.focus()}})})]})});ae.displayName="TimePicker";const ce=m.forwardRef(({locale:e=C,value:r,onChange:s,hourCycle:i=24,yearRange:n=50,disabled:f=!1,displayFormat:u,granularity:o="second",placeholder:l="Pick a date",...c},d)=>{const[a,h]=m.useState(r??new Date),p=m.useRef(null),g=y=>{if(!y)return;if(!r){s==null||s(y),h(y);return}const T=(y.getTime()-r.getTime())/(1e3*60*60*24),w=Ie(r,{days:Math.ceil(T)});s==null||s(w),h(w)};m.useImperativeHandle(d,()=>({...p.current,value:r}),[r]);const j={hour24:(u==null?void 0:u.hour24)??"PPP HH:mm:ss",hour12:(u==null?void 0:u.hour12)??"PP hh:mm:ss b"};return t.jsxs(xe,{children:[t.jsx(he,{asChild:!0,disabled:f,children:t.jsxs(q,{variant:"outline",className:b("w-[280px] justify-start text-left font-normal",!r&&"text-muted-foreground"),ref:p,children:[t.jsx(je,{className:"mr-2 h-4 w-4"}),r?J(r,i===24?j.hour24:j.hour12,{locale:e}):t.jsx("span",{children:l})]})}),t.jsxs(pe,{className:"w-auto p-0",children:[t.jsx(se,{mode:"single",selected:r,month:a,onSelect:y=>g(y),onMonthChange:g,initialFocus:!0,yearRange:n,locale:e,...c}),o!=="day"&&t.jsx("div",{className:"border-t border-border p-3",children:t.jsx(ae,{onChange:s,date:r,hourCycle:i,granularity:o})})]})]})});ce.displayName="DateTimePicker";function Z({tab:e}){const[r,s]=m.useState([]),[i,n]=m.useState(""),[f,u]=m.useState(),{data:o,isLoading:l}=_e(`per_page=15&page=1&search=${i}`),c=async h=>{var g;return n(h),((g=o==null?void 0:o.data)==null?void 0:g.map(j=>({value:String(j.id),label:j.first_name+" "+j.last_name+"("+j.id+")"})))||[]},d=be({defaultValues:{}});async function a(h){const p={...h,attendance_type:e};console.log("🚀 ~ onSubmit ~ data:",p)}return t.jsx(t.Fragment,{children:l?t.jsx("div",{className:"h-56",children:t.jsx(Se,{})}):t.jsx(Ne,{...d,children:t.jsxs("form",{onSubmit:d.handleSubmit(a),className:"w-full space-y-3",children:[t.jsx(H,{control:d.control,name:"employee_ids",render:({field:h})=>t.jsxs(_,{children:[t.jsx(I,{children:"Employee Name"}),t.jsx(P,{children:t.jsx(He,{...h,value:r,onSearch:c,onChange:p=>{s(p),h.onChange(p.map(g=>parseInt(g.value)))},hidePlaceholderWhenSelected:!0,placeholder:"Search and select options",loadingIndicator:t.jsx("span",{children:"Loading..."}),emptyIndicator:t.jsx("span",{children:"No options found"})})}),t.jsx(D,{})]})}),t.jsx(H,{control:d.control,name:"date_time",render:({field:h})=>t.jsxs(_,{children:[t.jsx(I,{children:"Punch Time"}),t.jsx(P,{children:t.jsx(ce,{...h,value:f,onChange:p=>{h.onChange(p),u(p)},granularity:"minute",hourCycle:12})}),t.jsx(D,{})]})}),t.jsx(H,{control:d.control,name:"note",render:()=>t.jsxs(_,{children:[t.jsx(I,{children:"Note"}),t.jsx(P,{children:t.jsx(Me,{...d.register("note")})}),t.jsx(D,{})]})}),t.jsx("div",{children:t.jsx(q,{variant:e==="check-in"?"default":"destructive",type:"submit",className:"w-full mt-4",children:e==="check-in"?"Check In":"Check Out"})})]})})})}function qe(){const[e,r]=m.useState("check-in");return console.log("🚀 ~ Attendance ~ tab:",e),t.jsx(t.Fragment,{children:t.jsx("div",{className:"flex flex-col",children:t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx(ve,{title:"Attendance",description:"Manage Attendance for you business"})}),t.jsx(ke,{}),t.jsxs(Te,{defaultValue:e,onValueChange:s=>r(s),className:"w-[400px] mx-auto",children:[t.jsxs(Ae,{className:"grid w-full grid-cols-2 my-2",children:[t.jsx(K,{value:"check-in",children:"Check In"}),t.jsx(K,{value:"check-out",children:"Check Out"})]}),t.jsx(U,{value:"check-in",children:t.jsxs(W,{children:[t.jsx(G,{children:t.jsx(Q,{children:"Check In"})}),t.jsx(F,{className:"space-y-2",children:t.jsx("div",{className:"space-y-1",children:t.jsx(Z,{tab:e})})})]})}),t.jsx(U,{value:"check-out",children:t.jsxs(W,{children:[t.jsx(G,{children:t.jsx(Q,{children:"Check Out"})}),t.jsx(F,{className:"space-y-2",children:t.jsx("div",{className:"space-y-1",children:t.jsx(Z,{tab:e})})})]})})]})]})})})}export{qe as default};
